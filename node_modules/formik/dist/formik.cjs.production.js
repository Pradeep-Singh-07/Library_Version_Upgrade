"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("tslib"),t=require("react"),r=e(require("react-fast-compare")),i=e(require("deepmerge")),a=e(require("lodash/cloneDeep")),o=e(require("lodash/toPath")),u=e(require("tiny-warning")),s=e(require("hoist-non-react-statics"));function l(e,n,t,r){void 0===r&&(r=0);for(var i=o(n);e&&r<i.length;)e=e[i[r++]];return void 0===e?t:e}function c(e,t,r){for(var i={},u=i,s=0,c=o(t);s<c.length-1;s++){var d=c[s],p=l(e,c.slice(0,s+1));if(u[d])u=u[d];else if(p)u=u[d]=a(p);else{var f=c[s+1];u=u[d]=h(f)&&Number(f)>=0?[]:{}}}if((0===s?e:u)[c[s]]===r)return e;void 0===r?delete u[c[s]]:u[c[s]]=r;var v=n.__assign({},e,i);return 0===s&&void 0===r&&delete v[c[s]],v}function d(e,n,t,r){void 0===t&&(t=new WeakMap),void 0===r&&(r={});for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],u=e[o];f(u)?t.get(u)||(t.set(u,!0),r[o]=Array.isArray(u)?[]:{},d(u,n,t,r[o])):r[o]=n}return r}var p=function(e){return"function"==typeof e},f=function(e){return null!==e&&"object"==typeof e},h=function(e){return String(Math.floor(Number(e)))===e},v=function(e){return"[object String]"===Object.prototype.toString.call(e)},m=function(e){return 0===t.Children.count(e)},_=function(e){return f(e)&&p(e.then)};function y(e){var n=!1;return[new Promise(function(t,r){e.then(function(e){return n?r({isCanceled:!0}):t(e)},function(e){return r(n?{isCanceled:!0}:e)})}),function(){n=!0}]}var S=t.createContext({}),E=S.Provider,g=S.Consumer;function F(){return t.useContext(S)}function T(e,t){switch(t.type){case"SET_VALUES":return n.__assign({},e,{values:t.payload});case"SET_TOUCHED":return n.__assign({},e,{touched:t.payload});case"SET_ERRORS":return n.__assign({},e,{errors:t.payload});case"SET_STATUS":return n.__assign({},e,{status:t.payload});case"SET_ISSUBMITTING":return n.__assign({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return n.__assign({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return n.__assign({},e,{values:c(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return n.__assign({},e,{touched:c(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return n.__assign({},e,{errors:c(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":case"SET_FORMIK_STATE":return n.__assign({},e,t.payload);case"SUBMIT_ATTEMPT":return n.__assign({},e,{touched:d(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return n.__assign({},e,{isSubmitting:!1});default:return e}}function b(e){var a=e.validateOnChange,o=void 0===a||a,u=e.validateOnBlur,s=void 0===u||u,d=e.isInitialValid,f=void 0!==d&&d,h=e.enableReinitialize,m=void 0!==h&&h,S=n.__rest(e,["validateOnChange","validateOnBlur","isInitialValid","enableReinitialize"]),E=n.__assign({validateOnChange:o,validateOnBlur:s,isInitialValid:f},S),g=t.useRef(E.initialValues),F=t.useRef(!1),b=t.useRef({}),I=t.useReducer(T,{values:E.initialValues,errors:{},touched:{},isSubmitting:!1,isValidating:!1,submitCount:0}),x=I[0],A=I[1],k=t.useCallback(function(){var e=y(W(x.values)),n=e[1];return e[0].then(function(e){return e}).catch(function(e){return e}),n},[x.values]);t.useEffect(function(){if(o&&!x.isSubmitting&&F.current)return k()},[x.values]),t.useEffect(function(){if(s&&!x.isSubmitting&&F.current)return k()},[x.touched]),t.useEffect(function(){m&&F.current&&!r(g.current,E.initialValues)&&(g.current=E.initialValues,D(E.initialValues))},[E.initialValues]),t.useEffect(function(){return F.current=!0,function(){F.current=!1}},[]);var P={resetForm:D,submitForm:Q,validateForm:W,validateField:q,setErrors:M,setFieldError:N,setFieldTouched:B,setFieldValue:j,setStatus:z,setSubmitting:J,setTouched:L,setValues:w,setFormikState:K};function V(e){if(v(e))return function(t){return n(t,e)};function n(e,n){e.persist&&e.persist();var t=e.target,r=t.name,i=n||(r||t.id);A({type:"SET_FIELD_TOUCHED",payload:{field:i,value:!0}})}n(e)}function U(e){if(v(e))return function(t){return n(t,e)};function n(e,n){var t,r=n,i=e;if(!v(e)){e.persist&&e.persist();var a=e.target,o=a.type,u=a.name,s=a.value,l=a.checked;r=n||(u||a.id),i=/number|range/.test(o)?(t=parseFloat(s),isNaN(t)?"":t):/checkbox/.test(o)?l:s}r&&A({type:"SET_FIELD_VALUE",payload:{field:r,value:i}})}n(e)}function D(e){var n=e||(null!==g.current?g.current:E.initialValues);g.current=n,A({type:"RESET_FORM",payload:{isSubmitting:!1,errors:{},touched:{},status:void 0,values:n,isValidating:!1,submitCount:0}})}function L(e){A({type:"SET_TOUCHED",payload:e})}function M(e){A({type:"SET_ERRORS",payload:e})}function w(e){A({type:"SET_VALUES",payload:e})}function N(e,n){A({type:"SET_FIELD_ERROR",payload:{field:e,value:n}})}function j(e,n){A({type:"SET_FIELD_VALUE",payload:{field:e,value:n}})}function B(e,n){void 0===n&&(n=!0),A({type:"SET_FIELD_TOUCHED",payload:{field:e,value:n}})}function q(e){if(null!==b.current&&b.current[e]&&b.current[e].validate&&p(b.current[e].validate)){var n=l(x.values,e),t=b.current[e].validate(n);return _(t)?(A({type:"SET_ISVALIDATING",payload:!0}),t.then(function(e){return e},function(e){return e}).then(function(n){A({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),A({type:"SET_ISVALIDATING",payload:!1})})):(A({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),Promise.resolve(t))}return Promise.resolve()}function G(e,n){return new Promise(function(t){var r=E.validate(e,n);void 0===r?t({}):_(r)?r.then(function(){t({})},function(e){t(e)}):t(r)})}function Y(e,n){return new Promise(function(t){var r=E.validationSchema,i=p(r)?r(n):r;(n&&i.validateAt?i.validateAt(n,e):O(e,i)).then(function(){t({})},function(e){t(R(e))})})}function H(e){if(null===b.current)return Promise.resolve({});var n=Object.keys(b.current).filter(function(e){return null!==b.current&&b.current[e]&&b.current[e].validate&&p(b.current[e].validate)}),t=n.length>0?n.map(function(n){return t=n,r=l(e,n),new Promise(function(e){return e(b.current[t].validate(r))}).then(function(e){return e},function(e){return e});var t,r}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(t).then(function(e){return e.reduce(function(e,t,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===t?e:(t&&(e=c(e,n[r],t)),e)},{})})}function W(e){return void 0===e&&(e=x.values),E.validationSchema||E.validate||b.current&&Object.keys(b.current).filter(function(e){return!!b.current[e].validate}).length>0?(A({type:"SET_ISVALIDATING",payload:!0}),Promise.all([H(e),E.validationSchema?Y(e):{},E.validate?G(e):{}]).then(function(e){var n=i.all([e[0],e[1],e[2]],{arrayMerge:C});return r(x.errors,n)||A({type:"SET_ERRORS",payload:n}),A({type:"SET_ISVALIDATING",payload:!1}),n})):Promise.resolve({})}function K(e){p(e)?A({type:"SET_FORMIK_STATE",payload:e(x)}):A({type:"SET_FORMIK_STATE",payload:e})}function z(e){A({type:"SET_STATUS",payload:e})}function J(e){A({type:"SET_ISSUBMITTING",payload:e})}function Q(){return A({type:"SUBMIT_ATTEMPT"}),W().then(function(e){0===Object.keys(e).length?Promise.resolve(E.onSubmit(x.values,P)).then(function(){F.current&&A({type:"SUBMIT_SUCCESS"})}).catch(function(e){F.current&&A({type:"SUBMIT_FAILURE"})}):F.current&&A({type:"SUBMIT_FAILURE"})})}function X(e){return{value:l(x.values,e),error:l(x.errors,e),touched:!!l(x.touched,e),initialValue:l(g.current,e)}}var Z=t.useMemo(function(){return!r(g.current,x.values)},[g.current,x.values]),$=t.useMemo(function(){return Z?x.errors&&0===Object.keys(x.errors).length:!1!==f&&p(f)?f(E):f},[x.errors,Z,f]);return n.__assign({},x,{initialValues:g.current||E.initialValues,handleBlur:V,handleChange:U,handleReset:function(){if(E.onReset){var e=E.onReset(x.values,P);_(e)?e.then(D):D()}else D()},handleSubmit:function(e){e&&e.preventDefault&&e.preventDefault(),Q()},resetForm:D,setErrors:M,setFormikState:K,setFieldTouched:B,setFieldValue:j,setFieldError:N,setStatus:z,setSubmitting:J,setTouched:L,setValues:w,submitForm:Q,validateForm:W,validateField:q,isValid:$,dirty:Z,unregisterField:function(e){null!==b.current&&delete b.current[e]},registerField:function(e,n){null!==b.current&&(b.current[e]={validate:n.validate})},getFieldProps:function(e,n){return[{name:e,value:!n||"radio"!==n&&"checkbox"!==n?l(x.values,e):void 0,onChange:U,onBlur:V},X(e)]},validateOnBlur:s,validateOnChange:o})}function I(e){var n=b(e),r=e.component,i=e.children,a=e.render;return t.createElement(E,{value:n},r?t.createElement(r,n):a?a(n):i?p(i)?i(n):m(i)?null:t.Children.only(i):null)}function R(e){var n={};if(0===e.inner.length)return c(n,e.path,e.message);for(var t=0,r=e.inner;t<r.length;t++){var i=r[t];n[i.path]||(n=c(n,i.path,i.message))}return n}function O(e,n,t,r){void 0===t&&(t=!1),void 0===r&&(r={});var i={};for(var a in e)if(e.hasOwnProperty(a)){var o=String(a);i[o]=""!==e[o]?e[o]:void 0}return n[t?"validateSync":"validate"](i,{abortEarly:!1,context:r})}function C(e,n,t){var r=e.slice();return n.forEach(function(n,a){if(void 0===r[a]){var o=!1!==t.clone&&t.isMergeableObject(n);r[a]=o?i(Array.isArray(n)?[]:{},n,t):n}else t.isMergeableObject(n)?r[a]=i(e[a],n,t):-1===e.indexOf(n)&&r.push(n)}),r}function x(e){var r=e.validate,i=e.name,a=e.render,o=e.children,s=e.as,l=void 0===s?"input":s,c=e.component,d=n.__rest(e,["validate","name","render","children","as","component"]),f=F(),h=n.__rest(f,["validate","validationSchema"]);u(!!a,'<Field render> has been deprecated and will be removed in future versions of Formik. Please use a child callback function instead. To get rid of this warning, \n        replace \n          <Field name="'+i+'" render={({field, form}) => ...} />\n        with\n          <Field name="'+i+'">{({field, form, meta}) => ...}</Field>\n    '),u(!!c,"<Field component> has been deprecated and will be removed in future versions of Formik. Use <Formik as> instead. Note that with the `as` prop, all props are passed directly through and not grouped in `field` object key."),u(!!l&&!!o&&p(o),"You should not use <Field as> and <Field children> as a function in the same <Field> component; <Field as> will be ignored."),u(!!c&&o&&p(o),"You should not use <Field as> and <Field children> as a function in the same <Field> component; <Field as> will be ignored."),u(!!a&&!!o&&!m(o),"You should not use <Field render> and <Field children> in the same <Field> component; <Field children> will be ignored"),t.useEffect(function(){return h.registerField(i,{validate:r}),function(){h.unregisterField(i)}},[i,r]);var v=h.getFieldProps(i,d.type),_=v[0],y=v[1],S={field:_,form:h};if(a)return a(S);if(p(o))return o(n.__assign({},S,{meta:y}));if(c){if("string"==typeof c){var E=d.innerRef,g=n.__rest(d,["innerRef"]);return t.createElement(c,n.__assign({ref:E},_,g),o)}return t.createElement(c,n.__assign({field:_,form:h},d),o)}if("string"==typeof l){E=d.innerRef,g=n.__rest(d,["innerRef"]);return t.createElement(l,n.__assign({ref:E},_,g),o)}return t.createElement(l,n.__assign({},_,d),o)}var A=x;function k(e){var r=F();return t.createElement("form",n.__assign({onSubmit:r.handleSubmit,onReset:r.handleReset},e))}function P(e){var r=function(r){return t.createElement(g,null,function(i){return t.createElement(e,n.__assign({},r,{formik:i}))})},i=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return r.WrappedComponent=e,r.displayName="FormikConnect("+i+")",s(r,e)}k.displayName="Form";var V=function(e,n,t){var r=(e||[]).slice(),i=r[n];return r.splice(n,1),r.splice(t,0,i),r},U=function(e,n,t){var r=(e||[]).slice(),i=r[n];return r[n]=r[t],r[t]=i,r},D=function(e,n,t){var r=(e||[]).slice();return r.splice(n,0,t),r},L=function(e,n,t){var r=(e||[]).slice();return r[n]=t,r},M=P(function(e){function r(t){var r=e.call(this,t)||this;return r.updateArrayField=function(e,t,i){var a=r.props,o=a.name,u=a.validateOnChange,s=a.formik,d=s.validateForm;(0,s.setFormikState)(function(r){var a="function"==typeof i?i:e,u="function"==typeof t?t:e;return n.__assign({},r,{values:c(r.values,o,e(l(r.values,o))),errors:i?c(r.errors,o,a(l(r.errors,o))):r.errors,touched:t?c(r.touched,o,u(l(r.touched,o))):r.touched})},function(){u&&d()})},r.push=function(e){return r.updateArrayField(function(n){return(n||[]).concat([a(e)])},!1,!1)},r.handlePush=function(e){return function(){return r.push(e)}},r.swap=function(e,n){return r.updateArrayField(function(t){return U(t,e,n)},!0,!0)},r.handleSwap=function(e,n){return function(){return r.swap(e,n)}},r.move=function(e,n){return r.updateArrayField(function(t){return V(t,e,n)},!0,!0)},r.handleMove=function(e,n){return function(){return r.move(e,n)}},r.insert=function(e,n){return r.updateArrayField(function(t){return D(t,e,n)},function(n){return D(n,e,null)},function(n){return D(n,e,null)})},r.handleInsert=function(e,n){return function(){return r.insert(e,n)}},r.replace=function(e,n){return r.updateArrayField(function(t){return L(t,e,n)},!1,!1)},r.handleReplace=function(e,n){return function(){return r.replace(e,n)}},r.unshift=function(e){var n=-1;return r.updateArrayField(function(t){var r=t?[e].concat(t):[e];return n<0&&(n=r.length),r},function(e){var t=e?[null].concat(e):[null];return n<0&&(n=t.length),t},function(e){var t=e?[null].concat(e):[null];return n<0&&(n=t.length),t}),n},r.handleUnshift=function(e){return function(){return r.unshift(e)}},r.handleRemove=function(e){return function(){return r.remove(e)}},r.handlePop=function(){return function(){return r.pop()}},r.remove=r.remove.bind(r),r.pop=r.pop.bind(r),r}return n.__extends(r,e),r.prototype.remove=function(e){var n;return this.updateArrayField(function(t){var r=t?t.slice():[];return n||(n=r[e]),p(r.splice)&&r.splice(e,1),r},!0,!0),n},r.prototype.pop=function(){var e;return this.updateArrayField(function(n){var t=n;return e||(e=t&&t.pop&&t.pop()),t},!0,!0),e},r.prototype.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},r=this.props,i=r.component,a=r.render,o=r.children,u=r.name,s=r.formik,l=n.__rest(s,["validate","validationSchema"]),c=n.__assign({},e,{form:l,name:u});return i?t.createElement(i,c):a?a(c):o?"function"==typeof o?o(c):m(o)?null:t.Children.only(o):null},r.defaultProps={validateOnChange:!0},r}(t.Component)),w=P(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(r,e),r.prototype.shouldComponentUpdate=function(e){return l(this.props.formik.errors,this.props.name)!==l(e.formik.errors,this.props.name)||l(this.props.formik.touched,this.props.name)!==l(e.formik.touched,this.props.name)||Object.keys(this.props).length!==Object.keys(e).length},r.prototype.render=function(){var e=this.props,r=e.component,i=e.formik,a=e.render,o=e.children,u=e.name,s=n.__rest(e,["component","formik","render","children","name"]),c=l(i.touched,u),d=l(i.errors,u);return c&&d?a?p(a)?a(d):null:o?p(o)?o(d):null:r?t.createElement(r,s,d):d:null},r}(t.Component));exports.useFormik=b,exports.Formik=I,exports.yupToFormErrors=R,exports.validateYupSchema=O,exports.useField=function(e,n){var t=F();return u(t,"useField() / <Field /> must be used underneath a <Formik> component or withFormik() higher order component"),t.getFieldProps(e,n)},exports.Field=x,exports.FastField=A,exports.Form=k,exports.withFormik=function(e){var r=e.mapPropsToValues,i=void 0===r?function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&"function"!=typeof e[t]&&(n[t]=e[t]);return n}:r,a=n.__rest(e,["mapPropsToValues"]);return function(e){var r=e.displayName||e.name||e.constructor&&e.constructor.name||"Component",o=function(o){function u(){var r=null!==o&&o.apply(this,arguments)||this;return r.validate=function(e){return a.validate(e,r.props)},r.validationSchema=function(){return p(a.validationSchema)?a.validationSchema(r.props):a.validationSchema},r.handleSubmit=function(e,t){return a.handleSubmit(e,n.__assign({},t,{props:r.props}))},r.renderFormComponent=function(i){return t.createElement(e,n.__assign({},r.props,i))},r}return n.__extends(u,o),u.prototype.render=function(){var e=this.props,r=n.__rest(e,["children"]);return t.createElement(I,n.__assign({},r,a,{validate:a.validate&&this.validate,validationSchema:a.validationSchema&&this.validationSchema,initialValues:i(this.props),initialStatus:a.mapPropsToStatus&&a.mapPropsToStatus(this.props),onSubmit:this.handleSubmit,render:this.renderFormComponent}))},u.displayName="WithFormik("+r+")",u}(t.Component);return s(o,e)}},exports.move=V,exports.swap=U,exports.insert=D,exports.replace=L,exports.FieldArray=M,exports.getIn=l,exports.setIn=c,exports.setNestedObjectValues=d,exports.isFunction=p,exports.isObject=f,exports.isInteger=h,exports.isString=v,exports.isNaN=function(e){return e!=e},exports.isEmptyChildren=m,exports.isPromise=_,exports.getActiveElement=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(n){return e.body}},exports.makeCancelable=y,exports.connect=P,exports.ErrorMessage=w,exports.FormikProvider=E,exports.FormikConsumer=g,exports.useFormikContext=F;
//# sourceMappingURL=formik.cjs.production.js.map
