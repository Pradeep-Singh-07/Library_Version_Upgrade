!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CobrowseAPI=t():e.CobrowseAPI=t()}(self,(function(){return function(){var e={924:function(e,t,r){"use strict";var n=r(210),i=r(559),o=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?i(r):r}},559:function(e,t,r){"use strict";var n=r(612),i=r(210),o=i("%Function.prototype.apply%"),s=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||n.call(s,o),c=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),u=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(e){l=null}e.exports=function(e){var t=a(n,s,arguments);if(c&&l){var r=c(t,"length");r.configurable&&l(t,"length",{value:1+u(0,e.length-(arguments.length-1))})}return t};var f=function(){return a(n,o,arguments)};l?l(e.exports,"apply",{value:f}):e.exports.apply=f},98:function(e,t){var r="undefined"!=typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&i&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var e,t,r,n=h(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=d(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=l(e),t=u(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[l(e)]},p.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},p.prototype.set=function(e,t){this.map[l(e)]=u(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),f(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){var r,n,i=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function A(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},g.call(m.prototype),g.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},A.error=function(){var e=new A(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];A.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new A(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,r){return new Promise((function(n,o){var s=new m(e,r);if(s.signal&&s.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new A(i,r))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}S.polyfill=!0,e.fetch||(e.fetch=S,e.Headers=p,e.Request=m,e.Response=A),t.Headers=p,t.Request=m,t.Response=A,t.fetch=S,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},227:function(e,t,r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(447)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},447:function(e,t,r){e.exports=function(e){function t(e){let r,i,o,s=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),o=i-(r||i);n.diff=o,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,i)=>{if("%%"===r)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];r=o.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},187:function(e){"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&y(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,o,s,l;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=u.bind(n);return i.listener=r,n.wrapFn=i,i}function p(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):d(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function y(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,u=d(c,l);for(r=0;r<l;++r)n(u[r],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},648:function(e){"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,i="[object Function]";e.exports=function(e){var o=this;if("function"!=typeof o||n.call(o)!==i)throw new TypeError(t+o);for(var s,a=r.call(arguments,1),c=function(){if(this instanceof s){var t=o.apply(this,a.concat(r.call(arguments)));return Object(t)===t?t:this}return o.apply(e,a.concat(r.call(arguments)))},l=Math.max(0,o.length-a.length),u=[],f=0;f<l;f++)u.push("$"+f);if(s=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(c),o.prototype){var p=function(){};p.prototype=o.prototype,s.prototype=new p,p.prototype=null}return s}},612:function(e,t,r){"use strict";var n=r(648);e.exports=Function.prototype.bind||n},210:function(e,t,r){"use strict";var n,i=SyntaxError,o=Function,s=TypeError,a=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var l=function(){throw new s},u=c?function(){try{return l}catch(e){try{return c(arguments,"callee").get}catch(e){return l}}}():l,f=r(405)(),p=Object.getPrototypeOf||function(e){return e.__proto__},h={},d="undefined"==typeof Uint8Array?n:p(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":f?p([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":h,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?p(p([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f?p((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f?p((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?p(""[Symbol.iterator]()):n,"%Symbol%":f?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":u,"%TypedArray%":d,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},v=function e(t){var r;if("%AsyncFunction%"===t)r=a("async function () {}");else if("%GeneratorFunction%"===t)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=a("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(r=p(i.prototype))}return y[t]=r,r},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=r(612),m=r(642),w=b.call(Function.call,Array.prototype.concat),A=b.call(Function.apply,Array.prototype.splice),E=b.call(Function.call,String.prototype.replace),S=b.call(Function.call,String.prototype.slice),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,j=/\\(\\)?/g,k=function(e){var t=S(e,0,1),r=S(e,-1);if("%"===t&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return E(e,O,(function(e,t,r,i){n[n.length]=r?E(i,j,"$1"):t||e})),n},x=function(e,t){var r,n=e;if(m(g,n)&&(n="%"+(r=g[n])[0]+"%"),m(y,n)){var o=y[n];if(o===h&&(o=v(n)),void 0===o&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');var r=k(e),n=r.length>0?r[0]:"",o=x("%"+n+"%",t),a=o.name,l=o.value,u=!1,f=o.alias;f&&(n=f[0],A(r,w([0,1],f)));for(var p=1,h=!0;p<r.length;p+=1){var d=r[p],v=S(d,0,1),g=S(d,-1);if(('"'===v||"'"===v||"`"===v||'"'===g||"'"===g||"`"===g)&&v!==g)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&h||(u=!0),m(y,a="%"+(n+="."+d)+"%"))l=y[a];else if(null!=l){if(!(d in l)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&p+1>=r.length){var b=c(l,d);l=(h=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:l[d]}else h=m(l,d),l=l[d];h&&!u&&(y[a]=l)}}return l}},405:function(e,t,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(419);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&i()}},419:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},642:function(e,t,r){"use strict";var n=r(612);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},705:function(e,t,r){var n=r(639).Symbol;e.exports=n},239:function(e,t,r){var n=r(705),i=r(607),o=r(333),s=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},561:function(e,t,r){var n=r(990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(i,""):e}},957:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},607:function(e,t,r){var n=r(705),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var i=s.call(e);return n&&(t?e[a]=r:delete e[a]),i}},333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},639:function(e,t,r){var n=r(957),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},990:function(e){var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},279:function(e,t,r){var n=r(218),i=r(771),o=r(841),s=Math.max,a=Math.min;e.exports=function(e,t,r){var c,l,u,f,p,h,d=0,y=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var r=c,n=l;return c=l=void 0,d=t,f=e.apply(n,r)}function m(e){return d=e,p=setTimeout(A,t),y?b(e):f}function w(e){var r=e-h;return void 0===h||r>=t||r<0||v&&e-d>=u}function A(){var e=i();if(w(e))return E(e);p=setTimeout(A,function(e){var r=t-(e-h);return v?a(r,u-(e-d)):r}(e))}function E(e){return p=void 0,g&&c?b(e):(c=l=void 0,f)}function S(){var e=i(),r=w(e);if(c=arguments,l=this,h=e,r){if(void 0===p)return m(h);if(v)return clearTimeout(p),p=setTimeout(A,t),b(h)}return void 0===p&&(p=setTimeout(A,t)),f}return t=o(t)||0,n(r)&&(y=!!r.leading,u=(v="maxWait"in r)?s(o(r.maxWait)||0,t):u,g="trailing"in r?!!r.trailing:g),S.cancel=function(){void 0!==p&&clearTimeout(p),d=0,c=h=l=p=void 0},S.flush=function(){return void 0===p?f:E(i())},S}},218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},5:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},448:function(e,t,r){var n=r(239),i=r(5);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},771:function(e,t,r){var n=r(639);e.exports=function(){return n.Date.now()}},493:function(e,t,r){var n=r(279),i=r(218);e.exports=function(e,t,r){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(r)&&(o="leading"in r?!!r.leading:o,s="trailing"in r?!!r.trailing:s),n(e,t,{leading:o,maxWait:t,trailing:s})}},841:function(e,t,r){var n=r(561),i=r(218),o=r(448),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=a.test(e);return r||c.test(e)?l(e.slice(2),r?2:8):s.test(e)?NaN:+e}},824:function(e){var t=1e3,r=60*t,n=60*r,i=24*n;function o(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,s){s=s||{};var a,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===l&&isFinite(e))return s.long?(a=e,(c=Math.abs(a))>=i?o(a,c,i,"day"):c>=n?o(a,c,n,"hour"):c>=r?o(a,c,r,"minute"):c>=t?o(a,c,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=n?Math.round(e/n)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},631:function(e,t,r){var n="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=n&&i&&"function"==typeof i.get?i.get:null,s=n&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=a&&c&&"function"==typeof c.get?c.get:null,u=a&&Set.prototype.forEach,f="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,d=Boolean.prototype.valueOf,y=Object.prototype.toString,v=Function.prototype.toString,g=String.prototype.match,b=String.prototype.slice,m=String.prototype.replace,w=String.prototype.toUpperCase,A=String.prototype.toLowerCase,E=RegExp.prototype.test,S=Array.prototype.concat,O=Array.prototype.join,j=Array.prototype.slice,k=Math.floor,x="function"==typeof BigInt?BigInt.prototype.valueOf:null,C=Object.getOwnPropertySymbols,M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,P="function"==typeof Symbol&&"object"==typeof Symbol.iterator,F="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,_=Object.prototype.propertyIsEnumerable,T=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function R(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||E.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-k(-e):k(e);if(n!==e){var i=String(n),o=b.call(t,i.length+1);return m.call(i,r,"$&_")+"."+m.call(m.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return m.call(t,r,"$&_")}var U=r(654).custom,I=U&&B(U)?U:null;function L(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function W(e){return m.call(String(e),/"/g,"&quot;")}function D(e){return!("[object Array]"!==$(e)||F&&"object"==typeof e&&F in e)}function B(e){if(P)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!M)return!1;try{return M.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,n,i){var a=r||{};if(V(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(V(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!V(a,"customInspect")||a.customInspect;if("boolean"!=typeof c&&"symbol"!==c)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(a,"numericSeparator")&&"boolean"!=typeof a.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var y=a.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return H(t,a);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var w=String(t);return y?R(t,w):w}if("bigint"==typeof t){var E=String(t)+"n";return y?R(t,E):E}var k=void 0===a.depth?5:a.depth;if(void 0===n&&(n=0),n>=k&&k>0&&"object"==typeof t)return D(t)?"[Array]":"[Object]";var C,U=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=O.call(Array(e.indent+1)," ")}return{base:r,prev:O.call(Array(t+1),r)}}(a,n);if(void 0===i)i=[];else if(z(i,t)>=0)return"[Circular]";function N(t,r,o){if(r&&(i=j.call(i)).push(r),o){var s={depth:a.depth};return V(a,"quoteStyle")&&(s.quoteStyle=a.quoteStyle),e(t,s,n+1,i)}return e(t,a,n+1,i)}if("function"==typeof t){var K=function(e){if(e.name)return e.name;var t=g.call(v.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),Z=X(t,N);return"[Function"+(K?": "+K:" (anonymous)")+"]"+(Z.length>0?" { "+O.call(Z,", ")+" }":"")}if(B(t)){var Y=P?m.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):M.call(t);return"object"!=typeof t||P?Y:G(Y)}if((C=t)&&"object"==typeof C&&("undefined"!=typeof HTMLElement&&C instanceof HTMLElement||"string"==typeof C.nodeName&&"function"==typeof C.getAttribute)){for(var ee="<"+A.call(String(t.nodeName)),te=t.attributes||[],re=0;re<te.length;re++)ee+=" "+te[re].name+"="+L(W(te[re].value),"double",a);return ee+=">",t.childNodes&&t.childNodes.length&&(ee+="..."),ee+"</"+A.call(String(t.nodeName))+">"}if(D(t)){if(0===t.length)return"[]";var ne=X(t,N);return U&&!function(e){for(var t=0;t<e.length;t++)if(z(e[t],"\n")>=0)return!1;return!0}(ne)?"["+Q(ne,U)+"]":"[ "+O.call(ne,", ")+" ]"}if(function(e){return!("[object Error]"!==$(e)||F&&"object"==typeof e&&F in e)}(t)){var ie=X(t,N);return"cause"in t&&!_.call(t,"cause")?"{ ["+String(t)+"] "+O.call(S.call("[cause]: "+N(t.cause),ie),", ")+" }":0===ie.length?"["+String(t)+"]":"{ ["+String(t)+"] "+O.call(ie,", ")+" }"}if("object"==typeof t&&c){if(I&&"function"==typeof t[I])return t[I]();if("symbol"!==c&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{l.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var oe=[];return s.call(t,(function(e,r){oe.push(N(r,t,!0)+" => "+N(e,t))})),J("Map",o.call(t),oe,U)}if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var se=[];return u.call(t,(function(e){se.push(N(e,t))})),J("Set",l.call(t),se,U)}if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{p.call(e,p)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return q("WeakMap");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{p.call(e,p);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return q("WeakSet");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{return h.call(e),!0}catch(e){}return!1}(t))return q("WeakRef");if(function(e){return!("[object Number]"!==$(e)||F&&"object"==typeof e&&F in e)}(t))return G(N(Number(t)));if(function(e){if(!e||"object"!=typeof e||!x)return!1;try{return x.call(e),!0}catch(e){}return!1}(t))return G(N(x.call(t)));if(function(e){return!("[object Boolean]"!==$(e)||F&&"object"==typeof e&&F in e)}(t))return G(d.call(t));if(function(e){return!("[object String]"!==$(e)||F&&"object"==typeof e&&F in e)}(t))return G(N(String(t)));if(!function(e){return!("[object Date]"!==$(e)||F&&"object"==typeof e&&F in e)}(t)&&!function(e){return!("[object RegExp]"!==$(e)||F&&"object"==typeof e&&F in e)}(t)){var ae=X(t,N),ce=T?T(t)===Object.prototype:t instanceof Object||t.constructor===Object,le=t instanceof Object?"":"null prototype",ue=!ce&&F&&Object(t)===t&&F in t?b.call($(t),8,-1):le?"Object":"",fe=(ce||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(ue||le?"["+O.call(S.call([],ue||[],le||[]),": ")+"] ":"");return 0===ae.length?fe+"{}":U?fe+"{"+Q(ae,U)+"}":fe+"{ "+O.call(ae,", ")+" }"}return String(t)};var N=Object.prototype.hasOwnProperty||function(e){return e in this};function V(e,t){return N.call(e,t)}function $(e){return y.call(e)}function z(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function H(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return H(b.call(e,0,t.maxStringLength),t)+n}return L(m.call(m.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,K),"single",t)}function K(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function G(e){return"Object("+e+")"}function q(e){return e+" { ? }"}function J(e,t,r,n){return e+" ("+t+") {"+(n?Q(r,n):O.call(r,", "))+"}"}function Q(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+O.call(e,","+r)+"\n"+t.prev}function X(e,t){var r=D(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=V(e,i)?t(e[i],e):""}var o,s="function"==typeof C?C(e):[];if(P){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var c in e)V(e,c)&&(r&&String(Number(c))===c&&c<e.length||P&&o["$"+c]instanceof Symbol||(E.call(/[^\w$]/,c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e))));if("function"==typeof C)for(var l=0;l<s.length;l++)_.call(e,s[l])&&n.push("["+t(s[l])+"]: "+t(e[s[l]],e));return n}},798:function(e){"use strict";var t=String.prototype.replace,r=/%20/g,n="RFC3986";e.exports={default:n,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:n}},129:function(e,t,r){"use strict";var n=r(261),i=r(235),o=r(798);e.exports={formats:o,parse:i,stringify:n}},235:function(e,t,r){"use strict";var n=r(769),i=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},l=function(e,t,r,n){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(o),l=a?o.slice(0,a.index):o,u=[];if(l){if(!r.plainObjects&&i.call(Object.prototype,l)&&!r.allowPrototypes)return;u.push(l)}for(var f=0;r.depth>0&&null!==(a=s.exec(o))&&f<r.depth;){if(f+=1,!r.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+o.slice(a.index)+"]"),function(e,t,r,n){for(var i=n?t:c(t,r),o=e.length-1;o>=0;--o){var s,a=e[o];if("[]"===a&&r.parseArrays)s=[].concat(i);else{s=r.plainObjects?Object.create(null):{};var l="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(l,10);r.parseArrays||""!==l?!isNaN(u)&&a!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(s=[])[u]=i:"__proto__"!==l&&(s[l]=i):s={0:i}}i=s}return i}(u,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?s.charset:e.charset;return{allowDots:void 0===e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:s.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:s.comma,decoder:"function"==typeof e.decoder?e.decoder:s.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var u="string"==typeof e?function(e,t){var r,l={},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=t.parameterLimit===1/0?void 0:t.parameterLimit,p=u.split(t.delimiter,f),h=-1,d=t.charset;if(t.charsetSentinel)for(r=0;r<p.length;++r)0===p[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[r]?d="utf-8":"utf8=%26%2310003%3B"===p[r]&&(d="iso-8859-1"),h=r,r=p.length);for(r=0;r<p.length;++r)if(r!==h){var y,v,g=p[r],b=g.indexOf("]="),m=-1===b?g.indexOf("="):b+1;-1===m?(y=t.decoder(g,s.decoder,d,"key"),v=t.strictNullHandling?null:""):(y=t.decoder(g.slice(0,m),s.decoder,d,"key"),v=n.maybeMap(c(g.slice(m+1),t),(function(e){return t.decoder(e,s.decoder,d,"value")}))),v&&t.interpretNumericEntities&&"iso-8859-1"===d&&(v=a(v)),g.indexOf("[]=")>-1&&(v=o(v)?[v]:v),i.call(l,y)?l[y]=n.combine(l[y],v):l[y]=v}return l}(e,r):e,f=r.plainObjects?Object.create(null):{},p=Object.keys(u),h=0;h<p.length;++h){var d=p[h],y=l(d,u[d],r,"string"==typeof e);f=n.merge(f,y,r)}return!0===r.allowSparse?f:n.compact(f)}},261:function(e,t,r){"use strict";var n=r(478),i=r(769),o=r(798),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,l=String.prototype.split,u=Array.prototype.push,f=function(e,t){u.apply(e,c(t)?t:[t])},p=Date.prototype.toISOString,h=o.default,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:h,formatter:o.formatters[h],indices:!1,serializeDate:function(e){return p.call(e)},skipNulls:!1,strictNullHandling:!1},y={},v=function e(t,r,o,s,a,u,p,h,v,g,b,m,w,A,E,S){for(var O,j=t,k=S,x=0,C=!1;void 0!==(k=k.get(y))&&!C;){var M=k.get(t);if(x+=1,void 0!==M){if(M===x)throw new RangeError("Cyclic object value");C=!0}void 0===k.get(y)&&(x=0)}if("function"==typeof h?j=h(r,j):j instanceof Date?j=b(j):"comma"===o&&c(j)&&(j=i.maybeMap(j,(function(e){return e instanceof Date?b(e):e}))),null===j){if(a)return p&&!A?p(r,d.encoder,E,"key",m):r;j=""}if("string"==typeof(O=j)||"number"==typeof O||"boolean"==typeof O||"symbol"==typeof O||"bigint"==typeof O||i.isBuffer(j)){if(p){var P=A?r:p(r,d.encoder,E,"key",m);if("comma"===o&&A){for(var F=l.call(String(j),","),_="",T=0;T<F.length;++T)_+=(0===T?"":",")+w(p(F[T],d.encoder,E,"value",m));return[w(P)+(s&&c(j)&&1===F.length?"[]":"")+"="+_]}return[w(P)+"="+w(p(j,d.encoder,E,"value",m))]}return[w(r)+"="+w(String(j))]}var R,U=[];if(void 0===j)return U;if("comma"===o&&c(j))R=[{value:j.length>0?j.join(",")||null:void 0}];else if(c(h))R=h;else{var I=Object.keys(j);R=v?I.sort(v):I}for(var L=s&&c(j)&&1===j.length?r+"[]":r,W=0;W<R.length;++W){var D=R[W],B="object"==typeof D&&void 0!==D.value?D.value:j[D];if(!u||null!==B){var N=c(j)?"function"==typeof o?o(L,D):L:L+(g?"."+D:"["+D+"]");S.set(t,x);var V=n();V.set(y,S),f(U,e(B,N,o,s,a,u,p,h,v,g,b,m,w,A,E,V))}}return U};e.exports=function(e,t){var r,i=e,l=function(e){if(!e)return d;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==e.format){if(!s.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=o.formatters[r],i=d.filter;return("function"==typeof e.filter||c(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:void 0===e.allowDots?d.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,delimiter:void 0===e.delimiter?d.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:d.encode,encoder:"function"==typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}}(t);"function"==typeof l.filter?i=(0,l.filter)("",i):c(l.filter)&&(r=l.filter);var u,p=[];if("object"!=typeof i||null===i)return"";u=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=a[u];if(t&&"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var y="comma"===h&&t&&t.commaRoundTrip;r||(r=Object.keys(i)),l.sort&&r.sort(l.sort);for(var g=n(),b=0;b<r.length;++b){var m=r[b];l.skipNulls&&null===i[m]||f(p,v(i[m],m,h,y,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,g))}var w=p.join(l.delimiter),A=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?A+="utf8=%26%2310003%3B&":A+="utf8=%E2%9C%93&"),w.length>0?A+w:""}},769:function(e,t,r){"use strict";var n=r(798),i=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],s=i.obj[i.prop],a=Object.keys(s),c=0;c<a.length;++c){var l=a[c],u=s[l];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:s,prop:l}),r.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,i,o){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",l=0;l<a.length;++l){var u=a.charCodeAt(l);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===n.RFC1738&&(40===u||41===u)?c+=a.charAt(l):u<128?c+=s[u]:u<2048?c+=s[192|u>>6]+s[128|63&u]:u<55296||u>=57344?c+=s[224|u>>12]+s[128|u>>6&63]+s[128|63&u]:(l+=1,u=65536+((1023&u)<<10|1023&a.charCodeAt(l)),c+=s[240|u>>18]+s[128|u>>12&63]+s[128|u>>6&63]+s[128|63&u])}return c},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var s=t;return o(t)&&!o(r)&&(s=a(t,n)),o(t)&&o(r)?(r.forEach((function(r,o){if(i.call(t,o)){var s=t[o];s&&"object"==typeof s&&r&&"object"==typeof r?t[o]=e(s,r,n):t.push(r)}else t[o]=r})),t):Object.keys(r).reduce((function(t,o){var s=r[o];return i.call(t,o)?t[o]=e(t[o],s,n):t[o]=s,t}),s)}}},478:function(e,t,r){"use strict";var n=r(210),i=r(924),o=r(631),s=n("%TypeError%"),a=n("%WeakMap%",!0),c=n("%Map%",!0),l=i("WeakMap.prototype.get",!0),u=i("WeakMap.prototype.set",!0),f=i("WeakMap.prototype.has",!0),p=i("Map.prototype.get",!0),h=i("Map.prototype.set",!0),d=i("Map.prototype.has",!0),y=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new s("Side channel does not contain "+o(e))},get:function(n){if(a&&n&&("object"==typeof n||"function"==typeof n)){if(e)return l(e,n)}else if(c){if(t)return p(t,n)}else if(r)return function(e,t){var r=y(e,t);return r&&r.value}(r,n)},has:function(n){if(a&&n&&("object"==typeof n||"function"==typeof n)){if(e)return f(e,n)}else if(c){if(t)return d(t,n)}else if(r)return function(e,t){return!!y(e,t)}(r,n);return!1},set:function(n,i){a&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new a),u(e,n,i)):c?(t||(t=new c),h(t,n,i)):(r||(r={key:{},next:null}),function(e,t,r){var n=y(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,n,i))}};return n}},654:function(){}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var n={};return function(){"use strict";r.d(n,{default:function(){return dn}});var e=r(493),t=r(227),i=r(187),o=r(129),s=r(98);class a extends Error{constructor(e,t){super(t),this.status=e,this.name="HTTPError"}}class c extends a{constructor(e,t,r){super(t,r),this.id=e,this.name="APIError"}}class l extends c{constructor(e,t,r){super(e,r,t),this.name="TokenExpiredError"}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function p(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,h(e,t,"get"))}function h(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var d=new WeakMap,y=new WeakMap,v=new WeakMap,g=new WeakMap;class b{constructor(e){var t,r;f(this,d,{writable:!0,value:void 0}),f(this,y,{writable:!0,value:{"Content-Type":"application/json"}}),u(this,"setHeader",((e,t)=>{p(this,y)[e]=t})),u(this,"getHeader",(e=>p(this,y)[e])),u(this,"removeHeader",(e=>{delete p(this,y)[e]})),f(this,v,{writable:!0,value:(e,t)=>{const r=new URL(e,p(this,d));return r.search=o.stringify(t,{arrayFormat:"brackets"}),/\/$/.test(r.pathname)&&(r.pathname=r.pathname.slice(0,-1)),r.toString()}}),u(this,"create",(async(e,t,r={},n={})=>{const i=await s(p(this,v).call(this,e,r),{method:"POST",headers:p(this,y),body:JSON.stringify(t),...n});return await p(this,g).call(this,i),i.json()})),u(this,"list",(async(e,t={},r={})=>{const n=await s(p(this,v).call(this,e,t),{method:"GET",headers:p(this,y),...r});await p(this,g).call(this,n);const i=await n.json();if(!Array.isArray(i))throw new Error("expected array");return i})),u(this,"fetch",(async(e,t,r={},n={})=>{const i=await s(p(this,v).call(this,e,r),{method:"GET",headers:p(this,y),...n});return await p(this,g).call(this,i),i.json()})),u(this,"update",(async(e,t,r={},n={})=>{const i=await s(p(this,v).call(this,e,r),{method:"PUT",headers:p(this,y),body:JSON.stringify(t),...n});return await p(this,g).call(this,i),i.json()})),u(this,"destroy",(async(e,t,r={},n={})=>{const i=await s(p(this,v).call(this,e,r),{method:"DELETE",headers:p(this,y),...n});return await p(this,g).call(this,i),{}})),f(this,g,{writable:!0,value:async e=>{if(e.status>=400){const t=await e.json();throw"jwt expired"===t.message?new l(t.id,e.status,t.message):new c(t.id,e.status,t.message)}}}),r=e,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t=this,h(t,d,"set"),r)}get baseurl(){return p(this,d)}}let m,w,A;try{m=new TextDecoder}catch(e){}let E=0;const S=[],O={};let j,k,x,C,M,P,F,_=S,T=0,R={},U=0,I=0,L=[],W=[],D={useRecords:!1,mapsAsObjects:!0},B=!1;class N{constructor(e){if(e&&(!e.keyMap&&!e._keyMap||e.useRecords||(e.useRecords=!1,e.mapsAsObjects=!0),!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.getStructures&&(e.getShared=e.getStructures),e.getShared&&!e.structures&&((e.structures=[]).uninitialized=!0),e.keyMap)){this.mapKey=new Map;for(let[t,r]of Object.entries(e.keyMap))this.mapKey.set(r,t)}Object.assign(this,e)}decodeKey(e){return this.keyMap&&this.mapKey.get(e)||e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(e){if(!this._keyMap)return e;let t=new Map;for(let[r,n]of Object.entries(e))t.set(this._keyMap.hasOwnProperty(r)?this._keyMap[r]:r,n);return t}decodeKeys(e){if(!this._keyMap||"Map"!=e.constructor.name)return e;if(!this._mapKey){this._mapKey=new Map;for(let[e,t]of Object.entries(this._keyMap))this._mapKey.set(t,e)}let t={};return e.forEach(((e,r)=>t[K(this._mapKey.has(r)?this._mapKey.get(r):r)]=e)),t}mapDecode(e,t){let r=this.decode(e);return this._keyMap&&"Array"===r.constructor.name?r.map((e=>this.decodeKeys(e))):r}decode(e,t){if(w)return fe((()=>(pe(),this?this.decode(e,t):N.prototype.decode.call(D,e,t))));A=t>-1?t:e.length,E=0,T=0,I=0,k=null,_=S,x=null,w=e;try{P=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(t){if(w=null,e instanceof Uint8Array)throw t;throw new Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof N){if(R=this,M=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return j=this.structures,V();(!j||j.length>0)&&(j=[])}else R=D,(!j||j.length>0)&&(j=[]),M=null;return V()}decodeMultiple(e,t){let r,n=0;try{let i=e.length;B=!0;let o=this?this.decode(e,i):de.decode(e,i);if(!t){for(r=[o];E<i;)n=E,r.push(V());return r}if(!1===t(o))return;for(;E<i;)if(n=E,!1===t(V()))return}catch(e){throw e.lastPosition=n,e.values=r,e}finally{B=!1,pe()}}}function V(){try{let e=$();if(x){if(E>=x.postBundlePosition){let e=new Error("Unexpected bundle position");throw e.incomplete=!0,e}E=x.postBundlePosition}if(E==A)j=null,w=null,C&&(C=null);else{if(E>A){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}if(!B)throw new Error("Data read, but end of buffer not reached")}return e}catch(e){throw pe(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function $(){let e=w[E++],t=e>>5;if(e&=31,e>23)switch(e){case 24:e=w[E++];break;case 25:if(7==t)return function(){let e=w[E++],t=w[E++],r=(127&e)>>2;if(31===r)return t||3&e?NaN:128&e?-1/0:1/0;if(0===r){let r=((3&e)<<8|t)/(1<<24);return 128&e?-r:r}return Z[3]=128&e|56+(r>>1),Z[2]=(7&e)<<5|t>>3,Z[1]=t<<5,Z[0]=0,X[0]}();e=P.getUint16(E),E+=2;break;case 26:if(7==t){let e=P.getFloat32(E);if(R.useFloat32>2){let t=he[(127&w[E])<<1|w[E+1]>>7];return E+=4,(t*e+(e>0?.5:-.5)>>0)/t}return E+=4,e}e=P.getUint32(E),E+=4;break;case 27:if(7==t){let e=P.getFloat64(E);return E+=8,e}if(t>1){if(P.getUint32(E)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");e=P.getUint32(E+4)}else R.int64AsNumber?(e=4294967296*P.getUint32(E),e+=P.getUint32(E+4)):e=P.getBigUint64(E);E+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e,r=[],n=0;for(;(e=$())!=O;)r[n++]=e;return 4==t?r:3==t?r.join(""):Buffer.concat(r);case 5:let i;if(R.mapsAsObjects){let e={};if(R.keyMap)for(;(i=$())!=O;)e[K(R.decodeKey(i))]=$();else for(;(i=$())!=O;)e[K(i)]=$();return e}{F&&(R.mapsAsObjects=!0,F=!1);let e=new Map;if(R.keyMap)for(;(i=$())!=O;)e.set(R.decodeKey(i),$());else for(;(i=$())!=O;)e.set(i,$());return e}case 7:return O;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+e)}switch(t){case 0:return e;case 1:return~e;case 2:return r=e,R.copyBuffers?Uint8Array.prototype.slice.call(w,E,E+=r):w.subarray(E,E+=r);case 3:if(I>=E)return k.slice(E-U,(E+=e)-U);if(0==I&&A<140&&e<32){let t=e<16?Q(e):function(e){let t=E,r=new Array(e);for(let n=0;n<e;n++){const e=w[E++];if((128&e)>0)return void(E=t);r[n]=e}return J.apply(String,r)}(e);if(null!=t)return t}return G(e);case 4:let t=new Array(e);for(let r=0;r<e;r++)t[r]=$();return t;case 5:if(R.mapsAsObjects){let t={};if(R.keyMap)for(let r=0;r<e;r++)t[K(R.decodeKey($()))]=$();else for(let r=0;r<e;r++)t[K($())]=$();return t}{F&&(R.mapsAsObjects=!0,F=!1);let t=new Map;if(R.keyMap)for(let r=0;r<e;r++)t.set(R.decodeKey($()),$());else for(let r=0;r<e;r++)t.set($(),$());return t}case 6:if(e>=57337){let t=j[8191&e];if(t)return t.read||(t.read=H(t)),t.read();if(e<65536){if(57343==e)return ee($());if(57342==e){let e=le(),t=$();for(let r=2;r<e;r++)ee([t++,$()]);return $()}if(57337==e)return function(){let e=le(),t=E+$();for(let t=2;t<e;t++){let e=le();E+=e}let r=E;return E=t,x=[q(le()),q(le())],x.position0=0,x.position1=0,x.postBundlePosition=E,E=r,$()}();if(R.getShared&&(ue(),t=j[8191&e],t))return t.read||(t.read=H(t)),t.read()}}let n=L[e];if(n)return n.handlesRead?n($):n($());{let t=$();for(let r=0;r<W.length;r++){let n=W[r](e,t);if(void 0!==n)return n}return new Y(t,e)}case 7:switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let t=(M||ie())[e];if(void 0!==t)return t;throw new Error("Unknown token "+e)}default:if(isNaN(e)){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}throw new Error("Unknown CBOR token "+e)}var r}const z=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function H(e){return e.slowReads=0,function(){let e=w[E++];if(e&=31,e>23)switch(e){case 24:e=w[E++];break;case 25:e=P.getUint16(E),E+=2;break;case 26:e=P.getUint32(E),E+=4;break;default:throw new Error("Expected array header, but got "+w[E-1])}let t=this.compiledReader;for(;t;){if(t.propertyCount===e)return t($);t=t.next}if(this.slowReads++>=3){let r=this.length==e?this:this.slice(0,e);return t=R.keyMap?new Function("r","return {"+r.map((e=>R.decodeKey(e))).map((e=>z.test(e)?K(e)+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"}"):new Function("r","return {"+r.map((e=>z.test(e)?K(e)+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"}"),this.compiledReader&&(t.next=this.compiledReader),t.propertyCount=e,this.compiledReader=t,t($)}let r={};if(R.keyMap)for(let t=0;t<e;t++)r[K(R.decodeKey(this[t]))]=$();else for(let t=0;t<e;t++)r[K(this[t])]=$();return r}}function K(e){return"__proto__"===e?"__proto_":e}let G=q;function q(e){let t;if(e<16&&(t=Q(e)))return t;if(e>64&&m)return m.decode(w.subarray(E,E+=e));const r=E+e,n=[];for(t="";E<r;){const e=w[E++];if(0==(128&e))n.push(e);else if(192==(224&e)){const t=63&w[E++];n.push((31&e)<<6|t)}else if(224==(240&e)){const t=63&w[E++],r=63&w[E++];n.push((31&e)<<12|t<<6|r)}else if(240==(248&e)){let t=(7&e)<<18|(63&w[E++])<<12|(63&w[E++])<<6|63&w[E++];t>65535&&(t-=65536,n.push(t>>>10&1023|55296),t=56320|1023&t),n.push(t)}else n.push(e);n.length>=4096&&(t+=J.apply(String,n),n.length=0)}return n.length>0&&(t+=J.apply(String,n)),t}let J=String.fromCharCode;function Q(e){if(e<4){if(e<2){if(0===e)return"";{let e=w[E++];return(128&e)>1?void(E-=1):J(e)}}{let t=w[E++],r=w[E++];if((128&t)>0||(128&r)>0)return void(E-=2);if(e<3)return J(t,r);let n=w[E++];return(128&n)>0?void(E-=3):J(t,r,n)}}{let t=w[E++],r=w[E++],n=w[E++],i=w[E++];if((128&t)>0||(128&r)>0||(128&n)>0||(128&i)>0)return void(E-=4);if(e<6){if(4===e)return J(t,r,n,i);{let e=w[E++];return(128&e)>0?void(E-=5):J(t,r,n,i,e)}}if(e<8){let o=w[E++],s=w[E++];if((128&o)>0||(128&s)>0)return void(E-=6);if(e<7)return J(t,r,n,i,o,s);let a=w[E++];return(128&a)>0?void(E-=7):J(t,r,n,i,o,s,a)}{let o=w[E++],s=w[E++],a=w[E++],c=w[E++];if((128&o)>0||(128&s)>0||(128&a)>0||(128&c)>0)return void(E-=8);if(e<10){if(8===e)return J(t,r,n,i,o,s,a,c);{let e=w[E++];return(128&e)>0?void(E-=9):J(t,r,n,i,o,s,a,c,e)}}if(e<12){let l=w[E++],u=w[E++];if((128&l)>0||(128&u)>0)return void(E-=10);if(e<11)return J(t,r,n,i,o,s,a,c,l,u);let f=w[E++];return(128&f)>0?void(E-=11):J(t,r,n,i,o,s,a,c,l,u,f)}{let l=w[E++],u=w[E++],f=w[E++],p=w[E++];if((128&l)>0||(128&u)>0||(128&f)>0||(128&p)>0)return void(E-=12);if(e<14){if(12===e)return J(t,r,n,i,o,s,a,c,l,u,f,p);{let e=w[E++];return(128&e)>0?void(E-=13):J(t,r,n,i,o,s,a,c,l,u,f,p,e)}}{let h=w[E++],d=w[E++];if((128&h)>0||(128&d)>0)return void(E-=14);if(e<15)return J(t,r,n,i,o,s,a,c,l,u,f,p,h,d);let y=w[E++];return(128&y)>0?void(E-=15):J(t,r,n,i,o,s,a,c,l,u,f,p,h,d,y)}}}}}let X=new Float32Array(1),Z=new Uint8Array(X.buffer,0,4);new Array(4096);class Y{constructor(e,t){this.value=e,this.tag=t}}L[0]=e=>new Date(e),L[1]=e=>new Date(Math.round(1e3*e)),L[2]=e=>{let t=BigInt(0);for(let r=0,n=e.byteLength;r<n;r++)t=BigInt(e[r])+t<<BigInt(8);return t},L[3]=e=>BigInt(-1)-L[2](e),L[4]=e=>+(e[1]+"e"+e[0]),L[5]=e=>e[1]*Math.exp(e[0]*Math.log(2));const ee=e=>{let t=e[0]-57344,r=e[1],n=j[t];n&&n.isShared&&((j.restoreStructures||(j.restoreStructures=[]))[t]=n),j[t]=r,r.read=H(r);let i={};if(R.keyMap)for(let t=2,n=e.length;t<n;t++)i[K(R.decodeKey(r[t-2]))]=e[t];else for(let t=2,n=e.length;t<n;t++)i[K(r[t-2])]=e[t];return i};L[105]=ee,L[14]=e=>x?x[0].slice(x.position0,x.position0+=e):new Y(e,14),L[15]=e=>x?x[1].slice(x.position1,x.position1+=e):new Y(e,15);let te={Error:Error,RegExp:RegExp};L[27]=e=>(te[e[0]]||Error)(e[1],e[2]);const re=e=>{if(132!=w[E++])throw new Error("Packed values structure must be followed by a 4 element array");let t=e();return M=M?t.concat(M.slice(t.length)):t,M.prefixes=e(),M.suffixes=e(),e()};function ne(e,t){return"string"==typeof e?e+t:e instanceof Array?e.concat(t):Object.assign({},e,t)}function ie(){if(!M){if(!R.getShared)throw new Error("No packed values available");ue()}return M}re.handlesRead=!0,L[51]=re,L[6]=e=>{if(!M){if(!R.getShared)return new Y(e,6);ue()}if("number"==typeof e)return M[16+(e>=0?2*e:-2*e-1)];throw new Error("No support for non-integer packed references yet")},L[25]=e=>stringRefs[e],L[256]=e=>{stringRefs=[];try{return e()}finally{stringRefs=null}},L[256].handlesRead=!0,L[28]=e=>{C||(C=new Map,C.id=0);let t,r=C.id++;t=w[E]>>5==4?[]:{};let n={target:t};C.set(r,n);let i=e();return n.used?Object.assign(t,i):(n.target=i,i)},L[28].handlesRead=!0,L[29]=e=>{let t=C.get(e);return t.used=!0,t.target},L[258]=e=>new Set(e),(L[259]=e=>(R.mapsAsObjects&&(R.mapsAsObjects=!1,F=!0),e())).handlesRead=!0,W.push(((e,t)=>e>=225&&e<=255?ne(ie().prefixes[e-224],t):e>=28704&&e<=32767?ne(ie().prefixes[e-28672],t):e>=1879052288&&e<=2147483647?ne(ie().prefixes[e-1879048192],t):e>=216&&e<=223?ne(t,ie().suffixes[e-216]):e>=27647&&e<=28671?ne(t,ie().suffixes[e-27639]):e>=1811940352&&e<=1879048191?ne(t,ie().suffixes[e-1811939328]):1399353956==e?{packedValues:M,structures:j.slice(0),version:t}:55799==e?t:void 0));const oe=1==new Uint8Array(new Uint16Array([1]).buffer)[0],se=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,"undefined"==typeof BigUint64Array?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,"undefined"==typeof BigInt64Array?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],ae=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<se.length;e++)ce(se[e],ae[e]);function ce(e,t){let r="get"+e.name.slice(0,-5);"function"!=typeof e&&(e=null);let n=e.BYTES_PER_ELEMENT;for(let i=0;i<2;i++){if(!i&&1==n)continue;let o=2==n?1:4==n?2:3;L[i?t:t-4]=1==n||i==oe?r=>{if(!e)throw new Error("Could not find typed array for code "+t);return new e(Uint8Array.prototype.slice.call(r,0).buffer)}:n=>{if(!e)throw new Error("Could not find typed array for code "+t);let s=new DataView(n.buffer,n.byteOffset,n.byteLength),a=n.length>>o,c=new e(a),l=s[r];for(let e=0;e<a;e++)c[e]=l.call(s,e<<o,i);return c}}}function le(){let e=31&w[E++];if(e>23)switch(e){case 24:e=w[E++];break;case 25:e=P.getUint16(E),E+=2;break;case 26:e=P.getUint32(E),E+=4}return e}function ue(){if(R.getShared){let e=fe((()=>(w=null,R.getShared())))||{},t=e.structures||[];R.sharedVersion=e.version,M=R.sharedValues=e.packedValues,!0===j?R.structures=j=t:j.splice.apply(j,[0,t.length].concat(t))}}function fe(e){let t=A,r=E,n=T,i=U,o=I,s=k,a=_,c=C,l=x,u=new Uint8Array(w.slice(0,A)),f=j,p=R,h=B,d=e();return A=t,E=r,T=n,U=i,I=o,k=s,_=a,C=c,x=l,w=u,B=h,j=f,R=p,P=new DataView(w.buffer,w.byteOffset,w.byteLength),d}function pe(){w=null,C=null,j=null}const he=new Array(147);for(let e=0;e<256;e++)he[e]=+("1e"+Math.floor(45.15-.30103*e));let de=new N({useRecords:!1});const ye=de.decode;let ve,ge,be;de.decodeMultiple;try{ve=new TextEncoder}catch(e){}const me="undefined"!=typeof Buffer,we=me?Buffer.allocUnsafeSlow:Uint8Array,Ae=me?Buffer:Uint8Array,Ee=me?4294967296:2144337920;let Se,Oe,je,ke=0,xe=null;const Ce=/[\u0080-\uFFFF]/,Me=Symbol("record-id");class Pe{constructor(e,t,r){this.structures=e,this.packedValues=t,this.version=r}}function Fe(e){e<24?Se[ke++]=128|e:e<256?(Se[ke++]=152,Se[ke++]=e):e<65536?(Se[ke++]=153,Se[ke++]=e>>8,Se[ke++]=255&e):(Se[ke++]=154,Oe.setUint32(ke,e),ke+=4)}function _e(e,t){switch(typeof e){case"string":if(e.length>3){if(t.objectMap[e]>-1||t.values.length>=t.maxValues)return;let r=t.get(e);if(r)2==++r.count&&t.values.push(e);else if(t.set(e,{count:1}),t.samplingPackedValues){let r=t.samplingPackedValues.get(e);r?r.count++:t.samplingPackedValues.set(e,{count:1})}}break;case"object":if(e)if(e instanceof Array)for(let r=0,n=e.length;r<n;r++)_e(e[r],t);else{let n=!t.encoder.useRecords;for(var r in e)e.hasOwnProperty(r)&&(n&&_e(r,t),_e(e[r],t))}break;case"function":console.log(e)}}const Te=1==new Uint8Array(new Uint16Array([1]).buffer)[0];function Re(e,t){return!Te&&t>1&&(e-=4),{tag:e,encode:function(e,t){let r=e.byteLength,n=e.byteOffset||0,i=e.buffer||e;t(me?Buffer.from(i,n,r):new Uint8Array(i,n,r))}}}function Ue(e,t){let r=e.byteLength;r<24?Se[ke++]=64+r:r<256?(Se[ke++]=88,Se[ke++]=r):r<65536?(Se[ke++]=89,Se[ke++]=r>>8,Se[ke++]=255&r):(Se[ke++]=90,Oe.setUint32(ke,r),ke+=4),ke+r>=Se.length&&t(ke+r),Se.set(e.buffer?e:new Uint8Array(e),ke),ke+=r}function Ie(e,t){Oe.setUint32(xe.position+e,ke-xe.position-e+1);let r=xe;xe=null,t(r[0]),t(r[1])}be=[Date,Set,Error,RegExp,Y,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,"undefined"==typeof BigUint64Array?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,"undefined"==typeof BigInt64Array?function(){}:BigInt64Array,Float32Array,Float64Array,Pe],ge=[{tag:1,encode(e,t){let r=e.getTime()/1e3;(this.useTimestamp32||0===e.getMilliseconds())&&r>=0&&r<4294967296?(Se[ke++]=26,Oe.setUint32(ke,r),ke+=4):(Se[ke++]=251,Oe.setFloat64(ke,r),ke+=8)}},{tag:258,encode(e,t){t(Array.from(e))}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag:e=>e.tag,encode(e,t){t(e.value)}},{encode(e,t,r){Ue(e,r)}},{getTag(e){if(e.constructor===Uint8Array&&(this.tagUint8Array||me&&!1!==this.tagUint8Array))return 64},encode(e,t,r){Ue(e,r)}},Re(68,1),Re(69,2),Re(70,4),Re(71,8),Re(72,1),Re(77,2),Re(78,4),Re(79,8),Re(85,4),Re(86,8),{encode(e,t){let r=e.packedValues||[],n=e.structures||[];if(r.values.length>0){Se[ke++]=216,Se[ke++]=51,Fe(4);let e=r.values;t(e),Fe(0),Fe(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let t=0,r=e.length;t<r;t++)packedObjectMap[e[t]]=t}if(n){Oe.setUint32(ke,3655335424),ke+=3;let r=n.slice(0);r.unshift(57344),r.push(new Y(e.version,1399353956)),t(r)}else t(new Y(e.version,1399353956))}}];let Le=new class extends N{constructor(e){let t,r,n,i,o;super(e),this.offset=0,e=e||{};let s=Ae.prototype.utf8Write?function(e,t,r){return Se.utf8Write(e,t,r)}:!(!ve||!ve.encodeInto)&&function(e,t){return ve.encodeInto(e,Se.subarray(t)).written},a=this,c=e.structures||e.saveStructures,l=e.maxSharedStructures;if(null==l&&(l=c?128:0),l>8190)throw new Error("Maximum maxSharedStructure is 8190");let u=e.sequential;u&&(l=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let f,p,h,d=e.sharedValues;if(d){h=Object.create(null);for(let e=0,t=d.length;e<t;e++)h[d[e]]=e}let y=[],v=0,g=0;this.mapEncode=function(e,t){return this._keyMap&&!this._mapped&&"Array"===e.constructor.name&&(e=e.map((e=>this.encodeKeys(e)))),this.encode(e,t)},this.encode=function(s,c){if(Se||(Se=new we(8192),Oe=new DataView(Se.buffer,0,8192),ke=0),je=Se.length-10,je-ke<2048?(Se=new we(Se.length),Oe=new DataView(Se.buffer,0,Se.length),je=Se.length-10,ke=0):c===$e&&(ke=ke+7&2147483640),t=ke,a.useSelfDescribedHeader&&(Oe.setUint32(ke,3654940416),ke+=3),o=a.structuredClone?new Map:null,a.bundleStrings&&"string"!=typeof s?(xe=[],xe.size=1/0):xe=null,r=a.structures,r){if(r.uninitialized){let e=a.getShared()||{};a.structures=r=e.structures||[],a.sharedVersion=e.version;let t=a.sharedValues=e.packedValues;if(t){h={};for(let e=0,r=t.length;e<r;e++)h[t[e]]=e}}let e=r.length;if(e>l&&!u&&(e=l),!r.transitions){r.transitions=Object.create(null);for(let t=0;t<e;t++){let e=r[t];if(!e)continue;let n,i=r.transitions;for(let r=0,o=e.length;r<o;r++){void 0===i[Me]&&(i[Me]=t);let o=e[r];n=i[o],n||(n=i[o]=Object.create(null)),i=n}i[Me]=1048576|t}}u||(r.nextId=e)}if(n&&(n=!1),i=r||[],p=h,e.pack){let t=new Map;if(t.values=[],t.encoder=a,t.maxValues=e.maxPrivatePackedValues||(h?16:1/0),t.objectMap=h||!1,t.samplingPackedValues=f,_e(s,t),t.values.length>0){Se[ke++]=216,Se[ke++]=51,Fe(4);let e=t.values;b(e),Fe(0),Fe(0),p=Object.create(h||null);for(let t=0,r=e.length;t<r;t++)p[e[t]]=t}}try{if(b(s),xe&&Ie(t,b),a.offset=ke,o&&o.idsToInsert){ke+=2*o.idsToInsert.length,ke>je&&w(ke),a.offset=ke;let e=function(e,t){let r,n=2*t.length,i=e.length-n;t.sort(((e,t)=>e.offset>t.offset?1:-1));for(let r=0;r<t.length;r++){let n=t[r];n.id=r;for(let t of n.references)e[t++]=r>>8,e[t]=255&r}for(;r=t.pop();){let t=r.offset;e.copyWithin(t+n,t,i),n-=2;let o=t+n;e[o++]=216,e[o++]=28,i=t}return e}(Se.subarray(t,ke),o.idsToInsert);return o=null,e}return c&$e?(Se.start=t,Se.end=ke,Se):Se.subarray(t,ke)}finally{if(r)if(g<10&&g++,r.length>l&&(r.length=l),v>1e4)r.transitions=null,g=0,v=0,y.length>0&&(y=[]);else if(y.length>0&&!u){for(let e=0,t=y.length;e<t;e++)y[e][Me]=void 0;y=[]}if(n&&a.saveShared){a.structures.length>l&&(a.structures=a.structures.slice(0,l));let e=Se.subarray(t,ke);return!1===a.updateSharedData()?a.encode(s):e}c&ze&&(ke=t)}},this.findCommonStringsToPack=()=>(f=new Map,h||(h=Object.create(null)),e=>{let t=e&&e.threshold||4,r=this.pack?e.maxPrivatePackedValues||16:0;d||(d=this.sharedValues=[]);for(let[e,i]of f)i.count>t&&(h[e]=r++,d.push(e),n=!0);for(;this.saveShared&&!1===this.updateSharedData(););f=null});const b=r=>{ke>je&&(Se=w(ke));var n,i=typeof r;if("string"===i){if(p){let t=p[r];if(t>=0)return void(t<16?Se[ke++]=t+224:(Se[ke++]=198,b(1&t?15-t>>1:t-16>>1)));if(f&&!e.pack){let e=f.get(r);e?e.count++:f.set(r,{count:1})}}let i,o=r.length;if(xe&&o>=4&&o<1024){if((xe.size+=o)>61440){let e,r=(xe[0]?3*xe[0].length+xe[1].length:0)+10;ke+r>je&&(Se=w(ke+r)),Se[ke++]=217,Se[ke++]=223,Se[ke++]=249,Se[ke++]=xe.position?132:130,Se[ke++]=26,e=ke-t,ke+=4,xe.position&&Ie(t,b),xe=["",""],xe.size=0,xe.position=e}let e=Ce.test(r);return xe[e?0:1]+=r,Se[ke++]=e?206:207,void b(o)}i=o<32?1:o<256?2:o<65536?3:5;let a=3*o;if(ke+a>je&&(Se=w(ke+a)),o<64||!s){let e,t,s,a=ke+i;for(e=0;e<o;e++)t=r.charCodeAt(e),t<128?Se[a++]=t:t<2048?(Se[a++]=t>>6|192,Se[a++]=63&t|128):55296==(64512&t)&&56320==(64512&(s=r.charCodeAt(e+1)))?(t=65536+((1023&t)<<10)+(1023&s),e++,Se[a++]=t>>18|240,Se[a++]=t>>12&63|128,Se[a++]=t>>6&63|128,Se[a++]=63&t|128):(Se[a++]=t>>12|224,Se[a++]=t>>6&63|128,Se[a++]=63&t|128);n=a-ke-i}else n=s(r,ke+i,a);n<24?Se[ke++]=96|n:n<256?(i<2&&Se.copyWithin(ke+2,ke+1,ke+1+n),Se[ke++]=120,Se[ke++]=n):n<65536?(i<3&&Se.copyWithin(ke+3,ke+2,ke+2+n),Se[ke++]=121,Se[ke++]=n>>8,Se[ke++]=255&n):(i<5&&Se.copyWithin(ke+5,ke+3,ke+3+n),Se[ke++]=122,Oe.setUint32(ke,n),ke+=4),ke+=n}else if("number"===i)if(r>>>0===r)r<24?Se[ke++]=r:r<256?(Se[ke++]=24,Se[ke++]=r):r<65536?(Se[ke++]=25,Se[ke++]=r>>8,Se[ke++]=255&r):(Se[ke++]=26,Oe.setUint32(ke,r),ke+=4);else if(r>>0===r)r>=-24?Se[ke++]=31-r:r>=-256?(Se[ke++]=56,Se[ke++]=~r):r>=-65536?(Se[ke++]=57,Oe.setUint16(ke,~r),ke+=2):(Se[ke++]=58,Oe.setUint32(ke,~r),ke+=4);else{let e;if((e=this.useFloat32)>0&&r<4294967296&&r>=-2147483648){let t;if(Se[ke++]=250,Oe.setFloat32(ke,r),e<4||(t=r*he[(127&Se[ke])<<1|Se[ke+1]>>7])>>0===t)return void(ke+=4);ke--}Se[ke++]=251,Oe.setFloat64(ke,r),ke+=8}else if("object"===i)if(r){if(o){let e=o.get(r);if(e){if(Se[ke++]=216,Se[ke++]=29,Se[ke++]=25,!e.references){let t=o.idsToInsert||(o.idsToInsert=[]);e.references=[],t.push(e)}return e.references.push(ke-t),void(ke+=2)}o.set(r,{offset:ke-t})}let e=r.constructor;if(e===Object)m(r,!0);else if(e===Array){(n=r.length)<24?Se[ke++]=128|n:Fe(n);for(let e=0;e<n;e++)b(r[e])}else if(e===Map)if((this.mapsAsObjects?!1!==this.useTag259ForMaps:this.useTag259ForMaps)&&(Se[ke++]=217,Se[ke++]=1,Se[ke++]=3),(n=r.size)<24?Se[ke++]=160|n:n<256?(Se[ke++]=184,Se[ke++]=n):n<65536?(Se[ke++]=185,Se[ke++]=n>>8,Se[ke++]=255&n):(Se[ke++]=186,Oe.setUint32(ke,n),ke+=4),a.keyMap)for(let[e,t]of r)b(a.encodeKey(e)),b(t);else for(let[e,t]of r)b(e),b(t);else{for(let e=0,t=ge.length;e<t;e++)if(r instanceof be[e]){let t=ge[e],n=t.tag;return null==n&&(n=t.getTag&&t.getTag.call(this,r)),n<24?Se[ke++]=192|n:n<256?(Se[ke++]=216,Se[ke++]=n):n<65536?(Se[ke++]=217,Se[ke++]=n>>8,Se[ke++]=255&n):n>-1&&(Se[ke++]=218,Oe.setUint32(ke,n),ke+=4),void t.encode.call(this,r,b,w)}if(r[Symbol.iterator]){Se[ke++]=159;for(let e of r)b(e);return void(Se[ke++]=255)}m(r,!r.hasOwnProperty)}}else Se[ke++]=246;else if("boolean"===i)Se[ke++]=r?245:244;else if("bigint"===i){if(r<BigInt(1)<<BigInt(64)&&r>=0)Se[ke++]=27,Oe.setBigUint64(ke,r);else if(r>-(BigInt(1)<<BigInt(64))&&r<0)Se[ke++]=59,Oe.setBigUint64(ke,-r-BigInt(1));else{if(!this.largeBigIntToFloat)throw new RangeError(r+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64");Se[ke++]=251,Oe.setFloat64(ke,Number(r))}ke+=8}else{if("undefined"!==i)throw new Error("Unknown type: "+i);Se[ke++]=247}},m=!1===this.useRecords?this.variableMapSize?e=>{let t=Object.keys(e),r=Object.values(e),n=t.length;if(n<24?Se[ke++]=160|n:n<256?(Se[ke++]=184,Se[ke++]=n):n<65536?(Se[ke++]=185,Se[ke++]=n>>8,Se[ke++]=255&n):(Se[ke++]=186,Oe.setUint32(ke,n),ke+=4),a.keyMap)for(let e=0;e<n;e++)b(encodeKey(t[e])),b(r[e]);else for(let e=0;e<n;e++)b(t[e]),b(r[e])}:(e,r)=>{Se[ke++]=185;let n=ke-t;ke+=2;let i=0;if(a.keyMap)for(let t in e)(r||e.hasOwnProperty(t))&&(b(a.encodeKey(t)),b(e[t]),i++);else for(let t in e)(r||e.hasOwnProperty(t))&&(b(t),b(e[t]),i++);Se[n+++t]=i>>8,Se[n+t]=255&i}:(e,t)=>{let r,o,s,a=i.transitions||(i.transitions=Object.create(null)),c=0,u=0;if(this.keyMap){s=Object.keys(e).map((e=>this.encodeKey(e))),u=s.length;for(let e=0;e<u;e++){let t=s[e];r=a[t],r||(r=a[t]=Object.create(null),c++),a=r}}else for(let n in e)(t||e.hasOwnProperty(n))&&(r=a[n],r||(1048576&a[Me]&&(o=65535&a[Me]),r=a[n]=Object.create(null),c++),a=r,u++);let f=a[Me];if(void 0!==f)f&=65535,Se[ke++]=217,Se[ke++]=f>>8|224,Se[ke++]=255&f;else{if(s||(s=a.__keys__||(a.__keys__=Object.keys(e))),void 0===o?(f=i.nextId++,f||(f=0,i.nextId=1),f>=256&&(i.nextId=(f=l)+1)):f=o,i[f]=s,!(f<l)){a[Me]=f,Oe.setUint32(ke,3655335680),ke+=3,c&&(v+=g*c),y.length>=256-l&&(y.shift()[Me]=void 0),y.push(a),Fe(u+2),b(57344+f),b(s);for(let t of Object.values(e))b(t);return}Se[ke++]=217,Se[ke++]=f>>8|224,Se[ke++]=255&f,a=i.transitions;for(let e=0;e<u;e++)(void 0===a[Me]||1048576&a[Me])&&(a[Me]=f),a=a[s[e]];a[Me]=1048576|f,n=!0}u<24?Se[ke++]=128|u:Fe(u);for(let r in e)(t||e.hasOwnProperty(r))&&b(e[r])},w=e=>{let r;if(e>16777216){if(e-t>Ee)throw new Error("Encoded buffer would be larger than maximum buffer size");r=Math.min(Ee,4096*Math.round(Math.max((e-t)*(e>67108864?1.25:2),4194304)/4096))}else r=1+(Math.max(e-t<<2,Se.length-1)>>12)<<12;let n=new we(r);return Oe=new DataView(n.buffer,0,r),Se.copy?Se.copy(n,0,t,e):n.set(Se.slice(t,e)),ke-=t,t=0,je=n.length-10,Se=n}}useBuffer(e){Se=e,Oe=new DataView(Se.buffer,Se.byteOffset,Se.byteLength),ke=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let e=this.sharedVersion||0;this.sharedVersion=e+1;let t=this.structures.slice(0),r=new Pe(t,this.sharedValues,this.sharedVersion),n=this.saveShared(r,(t=>(t&&t.version||0)==e));return!1===n?(r=this.getShared()||{},this.structures=r.structures||[],this.sharedValues=r.packedValues,this.sharedVersion=r.version,this.structures.nextId=this.structures.length):t.forEach(((e,t)=>this.structures[t]=e)),n}}({useRecords:!1});const We=Le.encode,{NEVER:De,ALWAYS:Be,DECIMAL_ROUND:Ne,DECIMAL_FIT:Ve}={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},$e=512,ze=1024;function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Ge(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Je(e,t,"get"))}function qe(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Je(e,t,"set"),r),r}function Je(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}const Qe=t("cbio.CBORSocket");var Xe=new WeakMap,Ze=new WeakMap,Ye=new WeakMap,et=new WeakMap,tt=new WeakMap,rt=new WeakMap,nt=new WeakMap,it=new WeakMap,ot=new WeakMap,st=new WeakMap,at=new WeakMap,ct=new WeakMap,lt=new WeakMap,ut=new WeakMap,ft=new WeakMap,pt=new WeakMap,ht=new WeakMap,dt=new WeakMap,yt=new WeakMap,vt=new WeakMap;class gt extends i.EventEmitter{constructor(e){super(),Ke(this,Xe,{writable:!0,value:void 0}),Ke(this,Ze,{writable:!0,value:!1}),Ke(this,Ye,{writable:!0,value:void 0}),Ke(this,et,{writable:!0,value:0}),Ke(this,tt,{writable:!0,value:6e4}),Ke(this,rt,{writable:!0,value:1e3+Math.floor(1e3*Math.random())}),Ke(this,nt,{writable:!0,value:void 0}),Ke(this,it,{writable:!0,value:void 0}),Ke(this,ot,{writable:!0,value:void 0}),Ke(this,st,{writable:!0,value:0}),Ke(this,at,{writable:!0,value:0}),Ke(this,ct,{writable:!0,value:async()=>{if(Ge(this,Ye))return void console.error("Socket already exists");Qe("creating ws");const e=await Ge(this,Xe).getUrl();if(Ge(this,Ze))return;if(Ge(this,Ye))return;const t=new WebSocket(e);t.binaryType="arraybuffer",t.addEventListener("open",Ge(this,lt)),t.addEventListener("message",Ge(this,ft)),t.addEventListener("close",Ge(this,dt)),t.addEventListener("error",Ge(this,yt)),qe(this,Ye,t)}}),Ke(this,lt,{writable:!0,value:()=>{Qe("ws opened"),this.emit("open"),clearTimeout(Ge(this,it)),qe(this,it,setTimeout((()=>{Qe("counting open as success"),qe(this,et,0)}),5e3))}}),Ke(this,ut,{writable:!0,value:e=>{qe(this,at,e)}}),Ke(this,ft,{writable:!0,value:e=>{try{const{event:t,data:r,ack:n}=ye(new Uint8Array(e.data));return n?Ge(this,ut).call(this,n):t?this.emit("event",t,r):console.error("Socket received message without event",e)}catch(t){return console.error("Error processing message",e.data,t.stack)}}}),Ke(this,pt,{writable:!0,value:e=>{const t=1+.5*Math.random(),r=Math.floor((300*e)**1.2*t);return Math.min(Math.max(Ge(this,rt),r),Ge(this,tt))}}),Ke(this,ht,{writable:!0,value:()=>{if(Ge(this,Ze))return void Qe("reconnect skipped as socket was closed");if(Ge(this,ot))return void Qe("reconnect skipped as reconnect already scheduled");if(!1===navigator.onLine)return Qe("navigator offline"),void qe(this,ot,setTimeout((()=>{qe(this,ot,null),Ge(this,ht).call(this)}),1e3));const e=Ge(this,pt).call(this,Ge(this,et));Qe("reconnecting in",e,"attempts",Ge(this,et)),qe(this,ot,setTimeout((async()=>{qe(this,ot,null),Ge(this,Ze)?console.warn("tried to reconnect after close"):(qe(this,Ye,null),await Ge(this,ct).call(this).catch(Ge(this,yt)))}),e)),qe(this,et,Ge(this,et)+1)}}),Ke(this,dt,{writable:!0,value:()=>{Qe("ws closed"),this.emit("close"),Qe("resetting message acks"),qe(this,st,0),qe(this,at,0),Ge(this,Ze)||Ge(this,ht).call(this),clearTimeout(Ge(this,it))}}),Ke(this,yt,{writable:!0,value:e=>{this.emit("error",e)}}),Ke(this,vt,{writable:!0,value:()=>{this.send("ping")}}),He(this,"messageLag",(()=>Ge(this,at)?Ge(this,st)-Ge(this,at):0)),He(this,"setMaxReconnectDelay",(e=>{Qe("set max delay",e),qe(this,tt,e)})),He(this,"setMinReconnectDelay",(e=>{Qe("set min delay",e),qe(this,rt,e)})),He(this,"send",((e,t)=>!!this.connected&&(qe(this,st,Ge(this,st)+1),Ge(this,Ye).send(We(t?{event:e,id:Ge(this,st),data:t}:{event:e})),!0))),He(this,"close",((...e)=>{if(Qe("close"),qe(this,Ze,!0),Ge(this,Ye))try{Ge(this,Ye).close(...e)}catch(e){Qe("error closing socket",e)}qe(this,Ye,null),this.removeAllListeners(),clearTimeout(Ge(this,ot)),clearInterval(Ge(this,nt)),"undefined"!=typeof window&&window.removeEventListener("unload",this.close)})),Qe("created cbor socket"),qe(this,Xe,e),qe(this,nt,setInterval(Ge(this,vt),6e4)),"undefined"!=typeof window&&window.addEventListener("unload",this.close),this.on("error",(e=>Qe("ws errored",e))),Ge(this,ct).call(this).catch(Ge(this,yt))}get bufferedAmount(){return Ge(this,Ye)?Ge(this,Ye).bufferedAmount:1/0}get connected(){return!!Ge(this,Ye)&&Ge(this,Ye).readyState===Ge(this,Ye).OPEN}}function bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mt(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function wt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Et(e,t,"get"))}function At(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Et(e,t,"set"),r),r}function Et(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var St=new WeakMap,Ot=new WeakMap,jt=new WeakMap,kt=new WeakMap,xt=new WeakMap,Ct=new WeakMap,Mt=new WeakMap,Pt=new WeakMap;class Ft extends i.EventEmitter{constructor(e){super(),mt(this,St,{writable:!0,value:new Set}),mt(this,Ot,{writable:!0,value:{}}),mt(this,jt,{writable:!0,value:void 0}),mt(this,kt,{writable:!0,value:void 0}),bt(this,"setHeader",((e,t)=>{wt(this,Ot)[e]=t})),bt(this,"connect",(async()=>{wt(this,jt)||(At(this,jt,new gt({getUrl:async()=>wt(this,xt).call(this,await wt(this,kt).getSocketAuth())})),wt(this,jt).setMaxReconnectDelay(6e5),wt(this,jt).on("open",wt(this,Ct)),wt(this,jt).on("event",wt(this,Mt)),wt(this,jt).on("error",wt(this,Pt)))})),mt(this,xt,{writable:!0,value:({url:e,token:t})=>{const r=Object.keys(wt(this,Ot)).map((e=>`${e}=${wt(this,Ot)[e]}`)).join("&");return`${e.replace("https://","wss://").replace("http://","ws://")}/sockets/1/ws?access_token=${t}&${r}`}}),mt(this,Ct,{writable:!0,value:()=>{[...wt(this,St)].forEach((e=>{const t=e();t&&this.send("subscribe",t)})),this.emit("open")}}),mt(this,Mt,{writable:!0,value:(e,t)=>{this.emit("event",e,t)}}),mt(this,Pt,{writable:!0,value:e=>{this.emit("error",e)}}),bt(this,"send",((e,t)=>!!wt(this,jt)&&wt(this,jt).send(e,t))),bt(this,"disconnect",(()=>{wt(this,jt)&&(wt(this,jt).close(),At(this,jt,null))})),bt(this,"subscribe",(e=>{wt(this,St).add(e),this.connect().catch(wt(this,Pt)),wt(this,jt)&&e()&&this.send("subscribe",e())})),bt(this,"unsubscribe",(e=>{wt(this,St).delete(e),0===wt(this,St).size&&this.disconnect()})),At(this,kt,e),this.setMaxListeners(1e4)}}var _t=Symbol("protected");function Tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rt(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Ut(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Lt(e,t,"get"))}function It(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Lt(e,t,"set"),r),r}function Lt(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}const Wt=t("cbio.RESTResource");var Dt=new WeakMap,Bt=new WeakMap;class Nt extends i.EventEmitter{constructor(e,t={}){super(),Rt(this,Dt,{writable:!0,value:void 0}),Rt(this,Bt,{writable:!0,value:void 0}),Tt(this,"fetch",(async(e={})=>this[_t].updateResource(await Ut(this,Bt).fetch(this.constructor.url(Ut(this,Dt)),Ut(this,Dt),e)))),Tt(this,"update",(async(e,t={})=>{const r={...e,id:this.id};return this[_t].updateResource(await Ut(this,Bt).update(this.constructor.url(Ut(this,Dt)),r,t))})),Tt(this,"destroy",(async(e={})=>this[_t].updateResource(await Ut(this,Bt).destroy(this.constructor.url(Ut(this,Dt)),Ut(this,Dt),e)))),Tt(this,_t,{updateResource:e=>(It(this,Dt,e),this.emit("updated",this),this),field:e=>Ut(this,Dt)[e],getResource:()=>Ut(this,Dt),getAPI:()=>Ut(this,Bt)}),It(this,Bt,e),It(this,Dt,t)}static url(e){throw Wt("url()",e),new Error("static url(state) must be implemented")}get id(){return this[_t].field("id")}toString(){return`${this.constructor.name} { ${this.id} }`}}function Vt(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function $t(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}const zt=t("cbio.SessionRecording");var Ht=new WeakMap,Kt=new WeakMap;class Gt extends Nt{constructor(e,t={}){var r,n;super(e,t),Vt(this,Ht,{get:qt,set:void 0}),Vt(this,Kt,{writable:!0,value:e=>this[_t].field(e)}),n=()=>({id:this.id}),(r="toJSON")in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,zt("constructed SessionRecording")}static url(e={}){if(!e.id)throw new Error("id is required");return`/api/1/sessions/${e.id}/recording`}get video(){const e=`${$t(this,Ht).baseurl}${$t(this,Kt).call(this,"video")}`;return{url:async()=>e,fetch:async()=>s(e)}}async events(){const e=await s(`${$t(this,Ht).baseurl}${$t(this,Kt).call(this,"actions")}`);if(!e.ok)throw new Error(`Failed to fetch events: ${await e.text()}`);return[...await e.json(),...$t(this,Kt).call(this,"events")].sort(((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()))}}function qt(){return this[_t].getAPI()}const Jt=t("cbio.recordings");var Qt=e=>({get:async(t,r)=>(Jt("get()",t,r),new Gt(e,await e.fetch(Gt.url({id:t}),r))),destroy:async(t,r)=>(Jt("destroy()",t,r),new Gt(e,await e.destroy(Gt.url({id:t}),r)))});function Xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zt(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Yt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,er(e,t,"get"))}function er(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}const tr=t("cbio.Session");var rr=new WeakMap,nr=new WeakMap,ir=new WeakMap,or=new WeakMap,sr=new WeakMap;class ar extends Nt{constructor(e,t,r={}){var n,i;super(e,r),Zt(this,nr,{get:cr,set:void 0}),Zt(this,rr,{writable:!0,value:void 0}),Zt(this,ir,{writable:!0,value:e=>this[_t].field(e)}),Xt(this,"end",(async()=>this.update({state:"ended"}))),Xt(this,"isActive",(()=>"active"===this.state)),Xt(this,"isAuthorizing",(()=>"authorizing"===this.state)),Xt(this,"isPending",(()=>"pending"===this.state)),Xt(this,"isEnded",(()=>"ended"===this.state)),Xt(this,"setFullDevice",(async e=>this.update({full_device:e}))),Xt(this,"setRemoteControl",(async e=>this.update({remote_control:e}))),Zt(this,or,{writable:!0,value:(e,t)=>{"session"===e&&t.id===this.id&&this[_t].updateResource(t)}}),Zt(this,sr,{writable:!0,value:()=>Yt(this,ir).call(this,"control_token")}),Xt(this,"subscribe",(async()=>{if(!Yt(this,rr))throw new Error("cannot subscribe to session without authorization");Yt(this,rr).subscribe(Yt(this,sr)),Yt(this,rr).off("event",Yt(this,or)),Yt(this,rr).on("event",Yt(this,or))})),Xt(this,"unsubscribe",(()=>{Yt(this,rr)&&(Yt(this,rr).unsubscribe(Yt(this,sr)),Yt(this,rr).off("event",Yt(this,or)))})),Xt(this,"toJSON",(()=>({id:this.id,device:this.device,custom_data:this.custom_data,agent:this.agent,created:this.created,updated:this.updated,activated:this.activated,ended:this.ended,full_device:this.full_device,remote_control:this.remote_control,state:this.state,recorded:this.recorded}))),i=t,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(n=this,er(n,rr,"set"),i),tr("constructed Session");const o=this[_t].updateResource;this[_t].updateResource=e=>{const t=this.isEnded();o(e),this.isEnded()&&!t&&(this.emit("ended",this),this.unsubscribe())}}static url(e={}){return`/api/1/sessions/${e.id||""}`}get code(){return Yt(this,ir).call(this,"code")}get state(){return Yt(this,ir).call(this,"state")}get recorded(){return Yt(this,ir).call(this,"recorded")}async recording(){return Qt(Yt(this,nr)).get(this.id)}get agent(){return Yt(this,ir).call(this,"agent")||!1}get custom_data(){return Yt(this,ir).call(this,"custom_data")}get device(){return Yt(this,ir).call(this,"device")}get created(){return Yt(this,ir).call(this,"updated")?new Date(Yt(this,ir).call(this,"created")):null}get updated(){return Yt(this,ir).call(this,"updated")?new Date(Yt(this,ir).call(this,"updated")):null}get activated(){return Yt(this,ir).call(this,"activated")?new Date(Yt(this,ir).call(this,"activated")):null}get ended(){return Yt(this,ir).call(this,"ended")?new Date(Yt(this,ir).call(this,"ended")):null}get full_device(){return!0===Yt(this,ir).call(this,"full_device")?"on":!1===Yt(this,ir).call(this,"full_device")?"off":Yt(this,ir).call(this,"full_device")}get remote_control(){return Yt(this,ir).call(this,"remote_control")}}function cr(){return this[_t].getAPI()}const lr=t("cbio.sessions");function ur(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fr(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function pr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,dr(e,t,"get"))}function hr(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,dr(e,t,"set"),r),r}function dr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}const yr=t("cbio.RemoteContext");var vr=new WeakMap,gr=new WeakMap,br=new WeakMap,mr=new WeakMap;class wr extends i.EventEmitter{constructor(e,t,r){if(super(),fr(this,vr,{writable:!0,value:void 0}),fr(this,gr,{writable:!0,value:void 0}),fr(this,br,{writable:!0,value:e=>{const t=pr(this,gr).id;pr(this,gr)[_t].updateResource(e),t!==pr(this,gr).id&&this.emit("session.loaded",pr(this,gr)),this.emit("session.updated",pr(this,gr))}}),fr(this,mr,{writable:!0,value:e=>{if(e.source!==pr(this,vr))return;yr("got post message",e.data);const{event:t,data:r}=e.data;"session"===t&&r&&pr(this,br).call(this,r),"screen"===t&&r&&this.emit("screen.updated",r),"error"===t&&r&&this.emit("error",new c(r.id,null,r.message))}}),ur(this,"setTool",(async e=>(yr("set tool",e),pr(this,vr).postMessage({tool:e},"*"),!0))),ur(this,"clearAnnotations",(async()=>(yr("clear annotations"),pr(this,vr).postMessage({drawing:null},"*"),!0))),ur(this,"endSession",(async()=>(yr("end session"),pr(this,vr).postMessage({session:{state:"ended"}},"*"),!0))),ur(this,"setFullDevice",(async e=>(pr(this,vr).postMessage({session:{full_device:e}},"*"),!0))),ur(this,"setRemoteControl",(async e=>(pr(this,vr).postMessage({session:{remote_control:e}},"*"),!0))),ur(this,"androidBack",(async()=>(pr(this,vr).postMessage({control:{state:"keydown",key:"GoBack"}},"*"),!0))),ur(this,"androidHome",(async()=>(pr(this,vr).postMessage({control:{state:"keydown",key:"GoHome"}},"*"),!0))),ur(this,"destroy",(()=>{window.removeEventListener("message",pr(this,mr)),this.removeAllListeners(),hr(this,vr,null)})),!e)throw new Error("context cannot be null");if(e instanceof window.HTMLIFrameElement&&(e=e.contentWindow),!e.postMessage)throw new Error("target must have postMessage interface");hr(this,vr,e),hr(this,gr,new ar(t,r)),window.addEventListener("message",pr(this,mr))}}function Ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Er(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Sr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,jr(e,t,"get"))}function Or(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,jr(e,t,"set"),r),r}function jr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}const kr=t("cbio.ActivityDetection");var xr=new WeakMap,Cr=new WeakMap,Mr=new WeakMap,Pr=new WeakMap,Fr=new WeakMap,_r=new WeakMap,Tr=new WeakMap;class Rr extends i.EventEmitter{constructor(t){super(),Er(this,xr,{writable:!0,value:!1}),Er(this,Cr,{writable:!0,value:!1}),Er(this,Mr,{writable:!0,value:null}),Er(this,Pr,{writable:!0,value:9e5}),Ar(this,"start",(()=>{Sr(this,xr)||(Or(this,xr,!0),kr("started"),document.addEventListener("mouseenter",Sr(this,Fr),{capture:!0,passive:!0}),document.addEventListener("mouseleave",Sr(this,Fr),{capture:!0,passive:!0}),document.addEventListener("mousemove",Sr(this,Fr),{capture:!0,passive:!0}),document.addEventListener("touchstart",Sr(this,Fr),{capture:!0,passive:!0}),document.addEventListener("touchend",Sr(this,Fr),{capture:!0,passive:!0}),document.addEventListener("touchmove",Sr(this,Fr),{capture:!0,passive:!0}),document.addEventListener("visibilitychange",Sr(this,Fr),{capture:!0}),Sr(this,Fr).call(this))})),Ar(this,"stop",(()=>{Or(this,Cr,!1),Or(this,xr,!1),kr("stopped"),clearTimeout(Sr(this,Mr)),this.removeAllListeners(),document.removeEventListener("mouseenter",Sr(this,Fr),{capture:!0,passive:!0}),document.removeEventListener("mouseleave",Sr(this,Fr),{capture:!0,passive:!0}),document.removeEventListener("mousemove",Sr(this,Fr),{capture:!0,passive:!0}),document.removeEventListener("touchstart",Sr(this,Fr),{capture:!0,passive:!0}),document.removeEventListener("touchend",Sr(this,Fr),{capture:!0,passive:!0}),document.removeEventListener("touchmove",Sr(this,Fr),{capture:!0,passive:!0}),document.removeEventListener("visibilitychange",Sr(this,Fr),{capture:!0})})),Ar(this,"isActive",(()=>Sr(this,Cr))),Er(this,Fr,{writable:!0,value:e((()=>{Sr(this,_r).call(this),clearTimeout(Sr(this,Mr)),Or(this,Mr,setTimeout(Sr(this,Tr),Sr(this,Pr))),this.emit("activity")}),500,{trailing:!1})}),Er(this,_r,{writable:!0,value:()=>{Sr(this,Cr)||(document.hidden?kr("window is hidden, not becoming active"):(Or(this,Cr,!0),kr("became active"),this.emit("active")))}}),Er(this,Tr,{writable:!0,value:()=>{Sr(this,Cr)&&(Or(this,Cr,!1),kr("became inactive"),this.emit("inactive"))}}),t&&Or(this,Pr,t)}}function Ur(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ir(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Lr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Dr(e,t,"get"))}function Wr(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Dr(e,t,"set"),r),r}function Dr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}const Br=t("cbio.Device");var Nr=new WeakMap,Vr=new WeakMap,$r=new WeakMap,zr=new WeakMap,Hr=new WeakMap,Kr=new WeakMap;class Gr extends Nt{constructor(e,t,r={}){super(e,r),Ir(this,Nr,{writable:!0,value:void 0}),Ir(this,Vr,{writable:!0,value:void 0}),Ir(this,$r,{writable:!0,value:e=>this[_t].field(e)}),Ir(this,zr,{writable:!0,value:(e,t)=>{"device"===e&&t.id===this.id&&this[_t].updateResource(t),"presence"===e&&t.id===this.id&&(Wr(this,Vr,t),this.emit("updated",this))}}),Ir(this,Hr,{writable:!0,value:()=>Lr(this,$r).call(this,"notification_token")}),Ir(this,Kr,{writable:!0,value:()=>{Lr(this,Nr).send("sync-presence",this.id)}}),Ur(this,"subscribe",(async()=>{Lr(this,Nr).subscribe(Lr(this,Hr)),Lr(this,Nr).off("event",Lr(this,zr)),Lr(this,Nr).on("event",Lr(this,zr)),Lr(this,Nr).off("open",Lr(this,Kr)),Lr(this,Nr).on("open",Lr(this,Kr)),Lr(this,Kr).call(this)})),Ur(this,"unsubscribe",(()=>{Lr(this,Nr).unsubscribe(Lr(this,Hr)),Lr(this,Nr).off("event",Lr(this,zr))})),Ur(this,"toJSON",(()=>({id:this.id,device:this.device,custom_data:this.custom_data,connectable:this.connectable,online:this.online,last_active:this.last_active}))),Wr(this,Nr,t),Br("constructed Device")}static url(e={}){return`/api/1/devices/${e.id||""}`}get last_active(){const e=new Date(Lr(this,Vr)&&Lr(this,Vr).last_seen||0).getTime(),t=new Date(Lr(this,$r).call(this,"last_active")).getTime();return new Date(Math.max(e,t))}get online(){return!(!Lr(this,Vr)||!Lr(this,Vr).present)}get connectable(){return!!Lr(this,$r).call(this,"connectable")&&(!Lr(this,Hr).call(this)||this.online)}get custom_data(){return Lr(this,$r).call(this,"custom_data")}get device(){return Lr(this,$r).call(this,"device")}}const qr=t("cbio.devices");const Jr=t("cbio.User");var Qr=new WeakMap;class Xr extends Nt{constructor(e,t={}){var r,n;super(e,t),function(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}(this,Qr,{writable:!0,value:e=>this[_t].field(e)}),n=()=>({id:this.id}),(r="toJSON")in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,Jr("constructed User")}static url(e={}){return`/api/1/users/${e.id||""}`}}const Zr=t("cbio.users");var Yr="1.4.0";function en(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function tn(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,rn(e,t,"get"))}function rn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}const nn=t("cbio.CobrowseAPI");var on=new WeakMap,sn=new WeakMap,an=new WeakMap,cn=new WeakMap,ln=new WeakMap,un=new WeakMap,fn=new WeakMap;class pn extends i.EventEmitter{constructor(t,r={}){var n,i,o;super(),en(this,cn,{get:hn,set:void 0}),en(this,on,{writable:!0,value:new Rr}),en(this,sn,{writable:!0,value:new Ft({getSocketAuth:()=>tn(this,ln).call(this)})}),en(this,an,{writable:!0,value:void 0}),o=async e=>{if(tn(this,cn))return new wr(e,tn(this,an),tn(this,sn))},(i="attachContext")in this?Object.defineProperty(this,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[i]=o,en(this,ln,{writable:!0,value:e((async()=>{const e=await tn(this,an).fetch("/api/1/users/me");return{token:e.notification_token,url:e.notification_url}}),36e5)}),en(this,un,{writable:!0,value:()=>{this.emit("socket:open")}}),en(this,fn,{writable:!0,value:e=>{if(!(e instanceof l))throw e;console.warn("The CobrowseIO token has expired. Please set a new token"),tn(this,cn)&&(tn(this,on).stop(),tn(this,sn).disconnect()),this.emit("error",e)}}),nn("constructed CobrowseAPI"),function(e,t,r){(function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}})(e,rn(e,t,"set"),r)}(this,an,new b(null!==(n=r.api)&&void 0!==n?n:"https://cobrowse.io")),tn(this,an).setHeader("X-CobrowsePlatform","agent-sdk"),tn(this,an).setHeader("X-CobrowseSDKVersion",Yr),tn(this,an).setHeader("X-CobrowseAPIVersion","1.2.0"),tn(this,cn)&&(tn(this,sn).setHeader("X-CobrowsePlatform","agent-sdk"),tn(this,sn).setHeader("X-CobrowseSDKVersion",Yr),tn(this,sn).on("error",tn(this,fn)),tn(this,sn).on("open",tn(this,un))),t&&(this.token=t),tn(this,cn)&&(tn(this,on).start(),tn(this,on).on("active",(()=>tn(this,sn).connect().catch(tn(this,fn)))),tn(this,on).on("inactive",tn(this,sn).disconnect))}set token(e){nn("updated token to",e),e?tn(this,an).setHeader("Authorization",`Bearer ${e}`):tn(this,an).removeHeader("Authorization"),tn(this,cn)&&tn(this,on).start()}get token(){const e=tn(this,an).getHeader("Authorization");return e?e.replace(/^Bearer /,""):null}set license(e){e?tn(this,an).setHeader("X-CobrowseLicense",e):tn(this,an).removeHeader("X-CobrowseLicense")}get license(){return tn(this,an).getHeader("X-CobrowseLicense")}get api(){return tn(this,an).baseurl}get devices(){return e=tn(this,an),t=tn(this,sn),{get:async(r,n)=>(qr("get()",n),new Gr(e,t,await e.fetch(Gr.url({id:r}),n))),list:async r=>(qr("list()",r),(await e.list(Gr.url(),r)).map((r=>new Gr(e,t,r))))};var e,t}get sessions(){return e=tn(this,an),t=tn(this,sn),{create:async(r={},n)=>(lr("create()",r,n),new ar(e,t,await e.create(ar.url(),r,n))),get:async(r,n)=>(lr("get()",r,n),new ar(e,t,await e.fetch(ar.url({id:r}),n))),list:async r=>(lr("list()",r),(await e.list(ar.url(),r)).map((r=>new ar(e,t,r))))};var e,t}get recordings(){return Qt(tn(this,an))}get users(){return e=tn(this,an),{get:async(t,r)=>(Zr("get()",t,r),new Xr(e,await e.fetch(Xr.url({id:t}),r)))};var e}}function hn(){return"object"==typeof window&&"object"==typeof document}var dn=pn}(),n.default}()}));
//# sourceMappingURL=cobrowse-agent-sdk.js.map