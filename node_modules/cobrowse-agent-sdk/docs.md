
<a name="classescobrowseapimd"></a>

# Class: CobrowseAPI

The Cobrowse Agent SDK provides a way to interact with the Cobrowse APIs for a variety of use cases.
Primarily this library is designed for building a fully white-labeled version of Cobrowse, including
custom user interfaces and styling to match your own platform.

The library can be used either from the browser (most common), or a NodeJS environment. Note: not all APIs are
available when used in NodeJS.

## Hierarchy

- `EventEmitter`

  ↳ **`CobrowseAPI`**

## Constructors

### constructor

• **new CobrowseAPI**(`token?`, `options?`)

Create a new Agent SDK instance. An instance encapsulates information about your API location (if
using the self-hosted Cobrowse Enterprise option), and optionally, the authorization token for the
agent using the SDK.

**Options**

`api` - The url for an Enterprise Cobrowse instance. You do not need to configure this when using our global hosted service.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `token?` | `string` | The [JWT](https://docs.cobrowse.io/agent-side-integrations/json-web-tokens-jwts) for API authorization. |
| `options?` | `Record`<`string`, `any`\> | Options for configuring this instance of CobrowseAPI. |

#### Overrides

EventEmitter.constructor

## Accessors

### api

• `get` **api**(): `string`

The url for the Cobrowse instance.

#### Returns

`string`

___

### devices

• `get` **devices**(): [`DevicesAPI`](#interfacesdevicesapimd)

Namespace API for devices. A device in Cobrowse is how a single instance of an app or website is tracked by Cobrowse.

#### Returns

[`DevicesAPI`](#interfacesdevicesapimd)

___

### license

• `get` **license**(): `string`

The license key for the Cobrowse account. This uniquely identifies your account within Cobrowse, you may
choose to have different license keys for development, test, and production environments.

#### Returns

`string`

• `set` **license**(`license`): `void`

The license key for the Cobrowse account. This uniquely identifies your account within Cobrowse, you may
choose to have different license keys for development, test, and production environments.

#### Parameters

| Name | Type |
| :------ | :------ |
| `license` | `string` |

#### Returns

`void`

___

### sessions

• `get` **sessions**(): [`SessionsAPI`](#interfacessessionsapimd)

Namespace API for sessions. A session in Cobrowse represents a single screensharing activity with an agent.

#### Returns

[`SessionsAPI`](#interfacessessionsapimd)

___

### token

• `get` **token**(): `string`

The [JWT](https://docs.cobrowse.io/agent-side-integrations/json-web-tokens-jwts) for API authorization.
This token should be securely generated by your backend to authorize use of the Cobrowse APIs.

#### Returns

`string`

• `set` **token**(`token`): `void`

The [JWT](https://docs.cobrowse.io/agent-side-integrations/json-web-tokens-jwts) for API authorization.
This token should be securely generated by your backend to authorize use of the Cobrowse APIs.

#### Parameters

| Name | Type |
| :------ | :------ |
| `token` | `string` |

#### Returns

`void`

___

### users

• `get` **users**(): [`UsersAPI`](#interfacesusersapimd)

Namespace API for users.

#### Returns

[`UsersAPI`](#interfacesusersapimd)

## Methods

### attachContext

▸ **attachContext**(`target`): `Promise`<[`RemoteContext`](#interfacesremotecontextmd)\>

Attach the agent context to an iframe; no JWT is required to use these APIs.
The returned context allows you to control certain elements within the iframe hosting
the screenshare. For example, you may switch the active agent tool being used, change the
session into a "full device" mode session, or just subscribe to changes in the session parameters.

```javascript
const cobrowse = new CobrowseAPI()
const frameEl = document.getElementById('myIframe')
const ctx = await cobrowse.attachContext(frameEl)

ctx.on('session.updated', (session) => {
  console.log('session was updated', session)
})
```

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `target` | `HTMLIFrameElement` | An iframe element. |

#### Returns

`Promise`<[`RemoteContext`](#interfacesremotecontextmd)\>

- The context returns contains methods specific to controlling the iframe


<a name="interfacesdevicemd"></a>

# Interface: Device

Represents a device in Cobrowse. A device in Cobrowse is how a single instance of an app or website is tracked by Cobrowse.
Each website within each different browser on a user's machine will be tracked as a separate device. Devices can be listed
and filtered by support agents to find a specific user's device. Read more about
[Identifying your devices](https://docs.cobrowse.io/sdk-features/identify-your-devices) to add metadata for filtering.

### Events

**`fires`** updated - The updated event will be fired when device data changes.

## Hierarchy

- `EventEmitter`

  ↳ **`Device`**

## Properties

### connectable

• **connectable**: `boolean`

Is the device in a state where it can accept a screenshare connection

___

### custom\_data

• **custom\_data**: `Record`<`string`, `any`\>

The metadata you have associated with this device for discoverability and filtering by agents

___

### device

• **device**: [`DeviceInfo`](#interfacesdeviceinfomd)

The device metadata exposed by the Cobrowse SDKs

___

### id

• **id**: `string`

The unique ID of this device, generated internally by the Cobrowse SDKs. You cannot control this value.

___

### last\_active

• **last\_active**: `Date`

The last time the device was seen

___

### online

• **online**: `boolean`

Is the device currently connected to the Cobrowse service

## Methods

### on

▸ **on**(`event`, `listener`): [`Device`](#interfacesdevicemd)

Listen for events on this device.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"updated"`` |
| `listener` | (`device`: [`Device`](#interfacesdevicemd)) => `void` |

#### Returns

[`Device`](#interfacesdevicemd)

#### Overrides

EventEmitter.on

___

### subscribe

▸ **subscribe**(): `Promise`<`void`\>

Subscribe to changes in this device.

#### Returns

`Promise`<`void`\>

___

### toJSON

▸ **toJSON**(): [`Device`](#interfacesdevicemd)

Converts this device instance to a plain object.

#### Returns

[`Device`](#interfacesdevicemd)

___

### unsubscribe

▸ **unsubscribe**(): `void`

Unsubscribe from this device.

#### Returns

`void`


<a name="interfacesdeviceinfomd"></a>

# Interface: DeviceInfo

## Properties

### app\_id

• **app\_id**: `string`

An identifier for the app being used (e.g. the domain name, or iOS app ID).

___

### app\_name

• **app\_name**: `string`

The name of the app being used by the end user.

___

### device

• **device**: `string`

The type of the device being used, e.g. iPhone or Chrome Browser.

___

### device\_locale

• **device\_locale**: `string`

The preferred locale of the user's device.

___

### device\_timezone

• **device\_timezone**: `string`

The timezone of the user's device.

___

### os\_version

• **os\_version**: `string`

The OS version of the device.

___

### platform

• **platform**: `string`

Which platform is being used, e.g. web, ios, android, windows, macos

___

### sdk\_version

• **sdk\_version**: `string`

The version of the Cobrowse SDK that the device is running


<a name="interfacesdevicesapimd"></a>

# Interface: DevicesAPI

## Methods

### get

▸ **get**(`id`, `query?`): `Promise`<[`Device`](#interfacesdevicemd)\>

Get a device by ID.

#### Parameters

| Name | Type |
| :------ | :------ |
| `id` | `string` |
| `query?` | `Record`<`string`, `string`\> |

#### Returns

`Promise`<[`Device`](#interfacesdevicemd)\>

___

### list

▸ **list**(`query?`): `Promise`<[`Device`](#interfacesdevicemd)[]\>

List devices, optionally filter by query parameters.

Supported query parameters:

`filter_XXX` - where XXX is replaced by your customData field names. e.g. filter_user_id=abc would filter devices with `customData = { user_id: 'abc' }`

`seen_before` - only include devices that checked-in with the Cobrowse service before this date

`seen_after` - only include devices that checked-in with the Cobrowse service after this date

#### Parameters

| Name | Type |
| :------ | :------ |
| `query?` | `Record`<`string`, `string`\> |

#### Returns

`Promise`<[`Device`](#interfacesdevicemd)[]\>


<a name="interfacesremotecontextmd"></a>

# Interface: RemoteContext

Control Cobrowse hosted in an iframe from a parent context.

### Events

**`fires`** session.updated - This event is fired when a property of the session is changed, for example full_device mode is switched on of off.

**`fires`** screen.updated - This event is triggered when some metadata about the screen changes, for example the size or orientation. Note, this event is only available via the RemoteContext.

## Hierarchy

- `EventEmitter`

  ↳ **`RemoteContext`**

## Methods

### androidBack

▸ **androidBack**(): `Promise`<`boolean`\>

Triggers the Android Back button

#### Returns

`Promise`<`boolean`\>

___

### androidHome

▸ **androidHome**(): `Promise`<`boolean`\>

Triggers the Android Home button

#### Returns

`Promise`<`boolean`\>

___

### clearAnnotations

▸ **clearAnnotations**(): `Promise`<`boolean`\>

Clear all agent session annotations from the user's view.

#### Returns

`Promise`<`boolean`\>

___

### destroy

▸ **destroy**(): `void`

Destroy this remote context; stops listening for events and detaches from the iframe.

#### Returns

`void`

___

### endSession

▸ **endSession**(): `Promise`<`boolean`\>

End the current agent session.

#### Returns

`Promise`<`boolean`\>

___

### on

▸ **on**(`event`, `listener`): [`RemoteContext`](#interfacesremotecontextmd)

Listen for session events in this context.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | `string` |
| `listener` | (`session`: [`Session`](#interfacessessionmd)) => `void` |

#### Returns

[`RemoteContext`](#interfacesremotecontextmd)

#### Overrides

EventEmitter.on

___

### setFullDevice

▸ **setFullDevice**(`state`): `Promise`<`boolean`\>

Set the current state of the session full-device mode. A full device session enables
the agent to capture all screens of the user's device, not just those inside your app
or website. Initiates request or ends full-device mode. The user must approve when switching
to full device mode.

#### Parameters

| Name | Type |
| :------ | :------ |
| `state` | `boolean` |

#### Returns

`Promise`<`boolean`\>

___

### setRemoteControl

▸ **setRemoteControl**(`state`): `Promise`<`boolean`\>

Set the current state of remote control, allowing the agent to request remote control of
the user's device. Initiate or end remote control.
Note: The agent may not set the remote control state to `on` directly, they can only
set it to `requested` and the user must approve if required.

#### Parameters

| Name | Type |
| :------ | :------ |
| `state` | ``"on"`` \| ``"off"`` \| ``"requested"`` \| ``"rejected"`` |

#### Returns

`Promise`<`boolean`\>

___

### setTool

▸ **setTool**(`tool`): `Promise`<`boolean`\>

Set the tool to use in the Agent session.

#### Parameters

| Name | Type |
| :------ | :------ |
| `tool` | ``"laser"`` \| ``"drawing"`` \| ``"control"`` |

#### Returns

`Promise`<`boolean`\>


<a name="interfacessessionmd"></a>

# Interface: Session

Represents a session in Cobrowse.

### Events

**`fires`** updated - fired when a session property changes

**`fires`** ended - fired when a session transitions to the `ended` state

## Hierarchy

- `EventEmitter`

  ↳ **`Session`**

## Properties

### activated

• **activated**: `Date`

The activation timestamp of the session. This is the time the user accepted the session.

___

### agent

• **agent**: `Object`

Metadata about the agent that started the session

#### Type declaration

| Name | Type |
| :------ | :------ |
| `colour` | `string` |
| `id` | `string` |
| `name` | `string` |

___

### code

• **code**: `string`

A 6 digit, human friendly code that can be used to initiate a session

___

### created

• **created**: `Date`

The date the session was first created (this will usually be before the `activated` timestamp).

___

### custom\_data

• **custom\_data**: `Record`<`string`, `any`\>

The metadata you have associated with this session for discoverability and filtering by agents.

___

### device

• **device**: [`DeviceInfo`](#interfacesdeviceinfomd)

Metadata about the user's device

___

### ended

• **ended**: `Date`

The timestamp the session was ended

___

### full\_device

• **full\_device**: `boolean`

Is the session in full device capturing mode or not

___

### id

• **id**: `string`

The unique ID for this screenshare session

___

### recorded

• **recorded**: `boolean`

Was the session recorded

___

### remote\_control

• **remote\_control**: ``"on"`` \| ``"off"`` \| ``"requested"`` \| ``"rejected"``

The state of the remote control authorization for the session

___

### state

• **state**: ``"pending"`` \| ``"authorizing"`` \| ``"active"`` \| ``"ended"``

The current state of the session. A session will progress through its lifecycle in
this order: `pending` → (`authorizing` →) `active` → `ended`. Only session that require
user consent will enter the `authorizing` state.

___

### updated

• **updated**: `Date`

The timestamp of the last update to the session

## Methods

### end

▸ **end**(): `Promise`<`void`\>

Ends this session.

#### Returns

`Promise`<`void`\>

___

### isActive

▸ **isActive**(): `boolean`

True if the session is active. An active session is one where the user has accepted
the screen share if required and frame are streaming to the agent

#### Returns

`boolean`

___

### isAuthorizing

▸ **isAuthorizing**(): `boolean`

True if the session is authorizing. An authorizing session is one where the user has
been presented with a consent dialog but has not yet agreed.

#### Returns

`boolean`

___

### isEnded

▸ **isEnded**(): `boolean`

True if the session is ended.

#### Returns

`boolean`

___

### isPending

▸ **isPending**(): `boolean`

True if the session is pending. A pending session is the inital state, waiting for
either a device or agent to join

#### Returns

`boolean`

___

### on

▸ **on**(`event`, `listener`): [`Session`](#interfacessessionmd)

Listen for events on this session.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"ended"`` |
| `listener` | (`session`: [`Session`](#interfacessessionmd)) => `void` |

#### Returns

[`Session`](#interfacessessionmd)

#### Overrides

EventEmitter.on

▸ **on**(`event`, `listener`): [`Session`](#interfacessessionmd)

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"updated"`` |
| `listener` | (`session`: [`Session`](#interfacessessionmd)) => `void` |

#### Returns

[`Session`](#interfacessessionmd)

#### Overrides

EventEmitter.on

___

### setFullDevice

▸ **setFullDevice**(`state`): `Promise`<`void`\>

Set the current state of the session full-device mode. A full device session enables
the agent to capture all screens of the user's device, not just those inside your app
or website. Initiates request or ends full-device mode. The user must approve when switching
to full device mode.

#### Parameters

| Name | Type |
| :------ | :------ |
| `state` | `boolean` |

#### Returns

`Promise`<`void`\>

___

### setRemoteControl

▸ **setRemoteControl**(`state`): `Promise`<`void`\>

Set the current state of remote control, allowing the agent to request remote control of
the user's device. Initiate or end remote control.
Note: The agent may not set the remote control state to `on` directly, they can only
set it to `requested` and the user must approve if required.

#### Parameters

| Name | Type |
| :------ | :------ |
| `state` | ``"on"`` \| ``"off"`` \| ``"requested"`` \| ``"rejected"`` |

#### Returns

`Promise`<`void`\>

___

### subscribe

▸ **subscribe**(): `Promise`<`void`\>

Subscribe to changes in this session.

#### Returns

`Promise`<`void`\>

___

### toJSON

▸ **toJSON**(): [`Session`](#interfacessessionmd)

Converts this session instance to a plain object.

#### Returns

[`Session`](#interfacessessionmd)

___

### unsubscribe

▸ **unsubscribe**(): `void`

Unsubscribe from this session.

#### Returns

`void`


<a name="interfacessessionsapimd"></a>

# Interface: SessionsAPI

## Methods

### create

▸ **create**(`resource?`, `query?`): `Promise`<[`Session`](#interfacessessionmd)\>

Create a session, optionally passing additional query parameters.

#### Parameters

| Name | Type |
| :------ | :------ |
| `resource?` | `any` |
| `query?` | `Record`<`string`, `string`\> |

#### Returns

`Promise`<[`Session`](#interfacessessionmd)\>

___

### get

▸ **get**(`id`, `query?`): `Promise`<[`Session`](#interfacessessionmd)\>

Get a session by ID

#### Parameters

| Name | Type |
| :------ | :------ |
| `id` | `string` |
| `query?` | `Record`<`string`, `string`\> |

#### Returns

`Promise`<[`Session`](#interfacessessionmd)\>

___

### list

▸ **list**(`query?`): `Promise`<[`Session`](#interfacessessionmd)[]\>

List sessions, optionally filter by query parameters.

Supported query parameters:

`filter_XXX` - where XXX is replaced by your customData field names. e.g. filter_user_id=abc would filter devices with `customData = { user_id: 'abc' }`

`activated_before` - only include sessions that were activated before this date. Useful for paging.

`activated_after` - only include devices that were activated after this date. Useful for paging.

`agent` - Administrator may set this to `all` to list sessions for all agents. Agent roles may only list their own sessions.

`state` - Filter by session that are in one of the supported states: `pending`, `authorizing`, `activated`, `ended`.

#### Parameters

| Name | Type |
| :------ | :------ |
| `query?` | `Record`<`string`, `string`\> |

#### Returns

`Promise`<[`Session`](#interfacessessionmd)[]\>


<a name="interfacesusermd"></a>

# Interface: User

Represents a user in Cobrowse.

## Hierarchy

- `EventEmitter`

  ↳ **`User`**

## Properties

### id

• **id**: `string`

## Methods

### on

▸ **on**(`event`, `listener`): [`User`](#interfacesusermd)

Listen for events on this user.

#### Parameters

| Name | Type |
| :------ | :------ |
| `event` | ``"updated"`` |
| `listener` | (`user`: [`User`](#interfacesusermd)) => `void` |

#### Returns

[`User`](#interfacesusermd)

#### Overrides

EventEmitter.on

___

### toJSON

▸ **toJSON**(): [`User`](#interfacesusermd)

Converts this device instance to a plain object.

#### Returns

[`User`](#interfacesusermd)


<a name="interfacesusersapimd"></a>

# Interface: UsersAPI

## Methods

### get

▸ **get**(`id`, `query?`): `Promise`<[`User`](#interfacesusermd)\>

Get a user by ID and optionally filter by query parameters.

#### Parameters

| Name | Type |
| :------ | :------ |
| `id` | `string` |
| `query?` | `Record`<`string`, `string`\> |

#### Returns

`Promise`<[`User`](#interfacesusermd)\>
